<!DOCTYPE html>
<html>
  <head><meta name="generator" content="Hexo 3.9.0">
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<title>
    Linux命令学习手册-tar
</title>
<!--javascript-->
<!--script type="text/javascript" src="/script.js"></script-->
<script src="../../../../lib/jquery-1.11.3.min.js"></script>
<script src="../../../../lib/typelighter.js"></script>
<script src="../../../../js/common.js"></script>
<script src="../../../../js/nav.js"></script>

<!--css-->
<!--link rel="stylesheet" href="/style.css" type="text/css" /-->
<link rel="stylesheet" href="../../../../css/partial/head.css">
<link rel="stylesheet" href="../../../../css/partial/header.css">
<link rel="stylesheet" href="../../../../css/partial/archives.css">
<link rel="stylesheet" href="../../../../css/partial/categories.css">
<link rel="stylesheet" href="../../../../css/partial/home-posts.css">
<link rel="stylesheet" href="../../../../css/partial/page-nav.css">
<link rel="stylesheet" href="../../../../css/partial/tags.css">
<link rel="stylesheet" href="../../../../css/partial/about.css">
<link rel="stylesheet" href="../../../../css/partial/more.css">
<link rel="stylesheet" href="../../../../css/partial/footer.css">
<link rel="stylesheet" href="../../../../css/post.css">
<link rel="stylesheet" href="../../../../css/orgmode/hexo_orgmode_style.css">
  </head>
  <body>
    <main class="main">
      <table class="container">
    <tbody id="tb_container">
        <tr id="tr_navbar">
            <table class="navbar">
	<tbody>
		<tr>
			<th class="navitm">
				<a href="../../../../index.html">主页</a>
			</th>

			<th class="navitm">
				<a href="../../../../categories">分类</a>
				<div id="category_menus" class="second">
					
					<!--合并内部类和自定义类。
    每个分类的数据结构包括：
    id: 分类唯一id
    title: 分类名
    parent: 父分类id
    children:子分类数组
注：
内部类包含一个固定的分类结type="text/javascript"内部根分类设置为categories, title为分类在主题config.yml中有配置（待定）。
后续文章中设置的分类如果不是内部类都会被称作自定义类，可以通过hexo本身引擎检测出来。
最终内部类和自定义类会合并到完整分类(full_categories)中，这样让所有类能用json等通用方式表示，便于移植。

使用举例：
var category_info = getCategoriesInfo();
<x var symbols={}; x> //定义导出变量
<x- include('category_list', {symbols:symbols}) x> //包含该文件
<x var category_info = symbols.getCategoriesInfo(); x> //获取分类信息：包含分类树，以及分类与文章数映射表。
<x- symbols.list_category(category_info.categories, category_info.categories_count) x> //列出分类索引树

注： '<x' 是EJS模板语言的标记比如x为%。
-->

					
					<ul id="full_categories_tree" class="categories_tree categories_level0" type="none"><li id="categories" class="categories_tree_item"><a href="../../../../categories/" class="item_path"><span id="categories_switch" class="tree_switch">▷</span><span id="categories_title" class="item_title">分类</span><span id="categories_count" class="item_count">(62)</span></a><ul id="categories_tree" class="categories_tree categories_level2" type="none"><li id="note" class="categories_tree_item"><a href="../../../../categories/categories/note" class="item_path"><span id="note_switch" class="tree_switch">▷</span><span id="note_title" class="item_title">记事</span><span id="note_count" class="item_count">(8)</span></a><ul id="note_tree" class="categories_tree categories_level3" type="none"><li id="remind" class="categories_tree_item"><a href="../../../../categories/categories/note/remind" class="item_path"><span id="remind_switch" class="tree_switch">○</span><span id="remind_title" class="item_title">备忘</span><span id="remind_count" class="item_count">(0)</span></a></li><li id="plan" class="categories_tree_item"><a href="../../../../categories/categories/note/plan" class="item_path"><span id="plan_switch" class="tree_switch">○</span><span id="plan_title" class="item_title">计划</span><span id="plan_count" class="item_count">(0)</span></a></li>|</ul></li><li id="study" class="categories_tree_item"><a href="../../../../categories/categories/study" class="item_path"><span id="study_switch" class="tree_switch">▷</span><span id="study_title" class="item_title">学习</span><span id="study_count" class="item_count">(4)</span></a><ul id="study_tree" class="categories_tree categories_level3" type="none"><li id="problem" class="categories_tree_item"><a href="../../../../categories/categories/study/problem" class="item_path"><span id="problem_switch" class="tree_switch">○</span><span id="problem_title" class="item_title">问题</span><span id="problem_count" class="item_count">(0)</span></a></li><li id="git" class="categories_tree_item"><a href="../../../../categories/categories/study/git" class="item_path"><span id="git_switch" class="tree_switch">○</span><span id="git_title" class="item_title">git</span><span id="git_count" class="item_count">(1)</span></a></li><li id="os" class="categories_tree_item"><a href="../../../../categories/categories/study/os" class="item_path"><span id="os_switch" class="tree_switch">○</span><span id="os_title" class="item_title">操作系统</span><span id="os_count" class="item_count">(1)</span></a></li><li id="books" class="categories_tree_item"><a href="../../../../categories/categories/study/books" class="item_path"><span id="books_switch" class="tree_switch">▷</span><span id="books_title" class="item_title">books</span><span id="books_count" class="item_count">(0)</span></a><ul id="books_tree" class="categories_tree categories_level4" type="none"><li id="apue" class="categories_tree_item"><a href="../../../../categories/categories/study/books/apue" class="item_path"><span id="apue_switch" class="tree_switch">○</span><span id="apue_title" class="item_title">APUE</span><span id="apue_count" class="item_count">(0)</span></a></li>|</ul></li><li id="linux" class="categories_tree_item"><a href="../../../../categories/categories/study/linux" class="item_path"><span id="linux_switch" class="tree_switch">▷</span><span id="linux_title" class="item_title">linux</span><span id="linux_count" class="item_count">(6)</span></a><ul id="linux_tree" class="categories_tree categories_level4" type="none"><li id="misc" class="categories_tree_item"><a href="../../../../categories/categories/study/linux/misc" class="item_path"><span id="misc_switch" class="tree_switch">○</span><span id="misc_title" class="item_title">杂乱</span><span id="misc_count" class="item_count">(3)</span></a></li><li id="command" class="categories_tree_item"><a href="../../../../categories/categories/study/linux/command" class="item_path"><span id="command_switch" class="tree_switch">○</span><span id="command_title" class="item_title">命令</span><span id="command_count" class="item_count">(19)</span></a></li>|</ul></li><li id="jekyll" class="categories_tree_item"><a href="../../../../categories/categories/study/jekyll" class="item_path"><span id="jekyll_switch" class="tree_switch">○</span><span id="jekyll_title" class="item_title">jekyll</span><span id="jekyll_count" class="item_count">(0)</span></a></li><li id="kits" class="categories_tree_item"><a href="../../../../categories/categories/study/kits" class="item_path"><span id="kits_switch" class="tree_switch">○</span><span id="kits_title" class="item_title">工具</span><span id="kits_count" class="item_count">(1)</span></a></li><li id="emacs" class="categories_tree_item"><a href="../../../../categories/categories/study/emacs" class="item_path"><span id="emacs_switch" class="tree_switch">○</span><span id="emacs_title" class="item_title">emacs</span><span id="emacs_count" class="item_count">(2)</span></a></li><li id="vim" class="categories_tree_item"><a href="../../../../categories/categories/study/vim" class="item_path"><span id="vim_switch" class="tree_switch">○</span><span id="vim_title" class="item_title">vim</span><span id="vim_count" class="item_count">(0)</span></a></li>|</ul></li><li id="work" class="categories_tree_item"><a href="../../../../categories/categories/work" class="item_path"><span id="work_switch" class="tree_switch">▷</span><span id="work_title" class="item_title">工作</span><span id="work_count" class="item_count">(0)</span></a><ul id="work_tree" class="categories_tree categories_level3" type="none"><li id="progress" class="categories_tree_item"><a href="../../../../categories/categories/work/progress" class="item_path"><span id="progress_switch" class="tree_switch">○</span><span id="progress_title" class="item_title">进度</span><span id="progress_count" class="item_count">(0)</span></a></li>|</ul></li><li id="life" class="categories_tree_item"><a href="../../../../categories/categories/life" class="item_path"><span id="life_switch" class="tree_switch">▷</span><span id="life_title" class="item_title">生活</span><span id="life_count" class="item_count">(0)</span></a><ul id="life_tree" class="categories_tree categories_level3" type="none"><li id="experience" class="categories_tree_item"><a href="../../../../categories/categories/life/experience" class="item_path"><span id="experience_switch" class="tree_switch">○</span><span id="experience_title" class="item_title">经验</span><span id="experience_count" class="item_count">(0)</span></a></li><li id="tips" class="categories_tree_item"><a href="../../../../categories/categories/life/tips" class="item_path"><span id="tips_switch" class="tree_switch">○</span><span id="tips_title" class="item_title">技巧</span><span id="tips_count" class="item_count">(0)</span></a></li>|</ul></li><li id="others" class="categories_tree_item"><a href="../../../../categories/categories/others" class="item_path"><span id="others_switch" class="tree_switch">▷</span><span id="others_title" class="item_title">其它</span><span id="others_count" class="item_count">(4)</span></a><ul id="others_tree" class="categories_tree categories_level3" type="none"><li id="rambles" class="categories_tree_item"><a href="../../../../categories/categories/others/rambles" class="item_path"><span id="rambles_switch" class="tree_switch">○</span><span id="rambles_title" class="item_title">随笔</span><span id="rambles_count" class="item_count">(0)</span></a></li><li id="temp" class="categories_tree_item"><a href="../../../../categories/categories/others/temp" class="item_path"><span id="temp_switch" class="tree_switch">○</span><span id="temp_title" class="item_title">临时</span><span id="temp_count" class="item_count">(0)</span></a></li><li id="test" class="categories_tree_item"><a href="../../../../categories/categories/others/test" class="item_path"><span id="test_switch" class="tree_switch">○</span><span id="test_title" class="item_title">测试</span><span id="test_count" class="item_count">(0)</span></a></li>|</ul></li>|</ul></li></ul>
				</div>
			</th>

			<th class="navblank"></th>

			<th class="navitm">
				<a href="../../../../tags">标签</a>
				<div id="tag_menus" class="second">
					<ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/gtd-next/">gtd_next</a><span class="tag-list-count">1</span></li></ul>
				</div>
			</th>

			<th class="navitm">
				<a href="../../../../archives">归档</a>
			</th>

			<th class="navblank"></th>

			<th class="navitm">
				<a href="../../../../more">更多</a>
			</th>

			<th class="navitm">
				<a href="../../../../about">关于</a>
			</th>

			<th class="navblank" style="width:25%;"></th>

			<th class="navitm" style="margin:0; padding:0;border:none;">
				<form method="get" id="searchform" action="/search.html" style="margin:0;padding:0;height:100%;">
					<span style="color:#00FF00;">Q</span>
					<span style="border-style:solid; border-width:1px; border-color:#00FF00;
		  		border-top:0px; border-left:0px;border-right:0px; 
				margin:0;padding:0;height:100%;">
						<input value="Search by title (canbe regex)..." name="s" class="s" onfocus="if (this.value == 'Search by title (canbe regex)...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search by title (canbe regex)...';}" style="margin:0;padding:0;height:100%;border:none;background: #000000; color:#00A600;" type="text">
					</span>
					<!--input type="submit" value="Q" style="width:20%;"-->
				</form>
			</th>

			<th class="navblank"></th>

			<th class="navblank"></th>

			<a href="#" id="topbtn">⇑</a>

			<a href="#bottom" id="bottombtn">⇓</a>
			<!--⇐⇑⇒⇓-->
		</tr><tr>
	</tr></tbody>
</table>
        </tr>
        <tr>
            <td id="td_page_header" colspan="6" valign="top" align="right" style="width:100%;">
        <header style="text-align: center;">
               <a href="/" title="Menu.Home">
               <h1>QuietHeart's Site</h1>
               </a>
        </header>
</td>    
        </tr>
        <tr>
            <td id="td_posts" colspan="6" valign="top">
                <h1 id="header1" style="text-align: center;">
                    Linux命令学习手册-tar
                </h1>
                <hr id="title_line">
                <article>
                    <div>
                        <p>
主要参考资料：《鸟哥的私房菜》《百度百科》
</p>

<p>
<a href="http://linux-vbird.bluedata.org/linux_base/0240tarcompress.htm" target="_blank" rel="noopener">http://linux-vbird.bluedata.org/linux_base/0240tarcompress.htm</a>
</p>

<p>
<a href="http://baike.baidu.com/view/573473.htm" target="_blank" rel="noopener">http://baike.baidu.com/view/573473.htm</a>
</p>

<p>
tar [-cxtzjvfpPN] 文件与目录 &#x2026;.
</p>

<p>
【功能】
</p>

<p>
打包，压缩的工具。
</p>


<p>
【举例】
</p>

<p>
*将整个 /etc 目录下的文件全部打包成为 /tmp/etc.tar：
</p>

<p>
$tar -cvf /tmp/etc.tar /etc 
</p>

<p>
或者$tar -zcvf /tmp/etc.tar.gz /etc
</p>

<p>
或者$tar -jcvf /tmp/etc.tar.bz2 /etc
</p>

<p>
这里，给出3种方法，第1个命令仅打包，不压缩；第2个命令打包后，以 gzip 压缩；第3个命令打包后，以 bzip2 压缩；如果有同名的etc.tar.gz将被覆盖 ,最后一个参数是待打包的路径名可以有多个。
</p>

<p>
在参数 f 之后的文件档名是自己取的，习惯上都用 .tar 来作为辨识。 如果加 z 参数，则以 .tar.gz 或 .tgz 来代表 gzip 压缩过的文件后缀； 如果加 j 参数，则以 .tar.bz2 来作为后缀名，上述指令在执行的时候，会显示一个警告讯息：# 『tar: Removing leading `/' from member names』那是关於绝对路径的特殊设定。
</p>


<p>
*查阅 /tmp/etc.tar.gz 文件内有哪些文件？
</p>

<p>
$tar -ztvf /tmp/etc.tar.gz
</p>

<p>
这里，我们使用 gzip 压缩，所以查阅该 tar file 内的文件时，就得加上 z 这个参数。
</p>


<p>
*将 /tmp/etc.tar.gz 文件解压缩在 /usr/local/src 底下：
</p>

<p>
$cd /usr/local/src
</p>

<p>
$tar -zxvf /tmp/etc.tar.gz
</p>

<p>
注意，在预设的情况下，我们可以将压缩档在任何地方解开的！以这个范例来说，
</p>

<p>
我先将工作目录变换到 <i>usr/local/src 底下，并且解开 /tmp/etc.tar.gz ， 则解开的目录会在 /usr/local/src/etc 另外，如果您进入 /usr/local/src/etc 则会发现，该目录下的文件属性与 /etc</i> 可能会有所不同。
</p>


<p>
*只将 /tmp/etc.tar.gz 内的 etc/passwd 解开：
</p>

<p>
$tar -zxvf /tmp/etc.tar.gz etc/passwd
</p>

<p>
这里，将在当前目录产生一个etc目录，目录下面只有passwd文件。
</p>


<p>
*查阅etc.tar.gz 内的文件名称：
</p>

<p>
$tar -tzvf etc.tar.gz
</p>

<p>
这里会显示etc.tar.gz内文件，目录，目录的子目录等等内容。
</p>


<p>
*将 <i>etc</i> 内的所有文件备份下来，并且保存其权限：
</p>

<p>
$tar -zxvpf /tmp/etc.tar.gz /etc
</p>

<p>
这里 -p 的属性很重要，尤其是当您要保留原本文件的属性时，如果没有这个选项，那么权限可能会和原来的不一样了（如果别人用的话），比如我是一个普通用户，我备份了/etc/passwd,那么解压后，我能修改解压的passwd，因为权限变了。
</p>


<p>
*在 /home 当中，把比 2005/06/01 新的文件备份：
</p>

<p>
$ tar -N '2005/06/01' -zcvf home.tar.gz /home
</p>


<p>
*备份 /home, /etc ，但不要 /home/dmtsai：
</p>

<p>
$tar &#x2013;exclude /home/dmtsai -zcvf myfile.tar.gz /home/* /etc
</p>


<p>
*将 <i>etc</i> 打包后直接解开在 /tmp 底下，而不产生文件！
</p>

<p>
$cd /tmp
</p>

<p>
$tar -cvf - /etc | tar -xvf -
</p>

<p>
这里，有点像$cp -r /etc /tmp。注意输出档变成 - 而输入档也变成 - ，又有一个 | 存在，这分别代表 standard output, standard input 与管线命令。如果你输入$cat -，那么你就会明白-做为标准输入的作用（这里的-同$1）；同理，$tar czvf - /etc &gt; etc.tar.gz的意思是压缩到标准输出再重定向标准输出（实践后发现这里的-不同$0???）。
</p>


<p>
*输入压缩文件的内容：
</p>

<p>
$tar xzvf test_out_direct.tgz -O
</p>

<p>
这里，将依次显示test_out_direct.tgz里面文件的内容（内容前面会有相应文件名无论有没有v选择都有文件名），这个命令适合显示压缩包内某一个文件的内容。
</p>


<p>
*删除tar包内的指定文件：
</p>

<p>
$tar &#x2013;delete &#x2013;file=package.tar e/f
</p>

<p>
这样将删除package.tar中的e/f文件(e目录中的f文件)，这里文件可以是包中的一个目录，也可是一个文件，甚至是包中某个目录的子文件，如这个例子。需要注意的是，文件package.tar必须是没有压缩过的，即利用tar -cf package.tar等没有用到z等压缩的选项创建的文件。
</p>


<p>
【描述】
</p>

<p>
参数：
</p>

<p>
-c ：建立一个压缩文件的参数指令(create 的意思)；
</p>

<p>
-x ：解开一个压缩文件的参数指令！
</p>

<p>
-t ：查看 tarfile 里面的文件！
</p>

<p>
特别注意，在参数的下达中， c/x/t 仅能存在一个！不可同时存在！
</p>

<p>
因为不可能同时压缩与解压缩。
</p>

<p>
-z ：是否同时具有 gzip 的属性？亦即是否需要用 gzip 压缩？
</p>

<p>
-Z 调用compress来压缩归档文件，与-x联用时调用compress完成解压缩
</p>

<p>
-j ：是否同时具有 bzip2 的属性？亦即是否需要用 bzip2 压缩？
</p>

<p>
-v ：压缩的过程中显示文件，也就是显示压缩了哪些文件！这个常用，但不建议用在背景执行过程！
</p>

<p>
-f ：使用档名，请留意，在 f 之后要立即接档名喔！不要再加参数！
</p>

<p>
例如使用『 tar -zcvfP tfile sfile』就是错误的写法，要写成『 tar -zcvPf tfile sfile』才对.
</p>

<p>
-p ：使用原文件的原来属性（属性不会依据使用者而变，如果不使用这个选项那么文件的属性将变化为相应操作用户的属性）
</p>

<p>
-P ：可以使用绝对路径来压缩！
</p>

<p>
-N ：比后面接的日期(yyyy/mm/dd)还要新的才会被打包进新建的文件中！
</p>

<p>
&#x2013;exclude FILE：在压缩的过程中，不要将 FILE 打包！
</p>

<p>
-O  将文件解开到标准输出.（适合一个文件，这样把文件内容输出来了）
</p>

<p>
&#x2013;delete用于删除包内指定的文件使用（见后面）。
</p>

<p>
u 更新文件。就是说，用新增的文件取代原备份文件，如果在备份文件中找不到要更新的文件，则把它追加到备份文件的最后。
</p>

<p>
r 把要存档的文件追加到档案文件的末尾。例如用户已经作好备份文件，又发现还有一个目录或是一些文件忘记备份了，这时可以使用该选项，将忘记的目录或文件追加到备份文件中。
</p>


<p>
【其它】
</p>

<p>
*最常用的压缩解压过程举例：
</p>

<p>
自己的实践：
</p>

<p>
1)首先查看目录结构:
</p>

<p>
$ ls -p
</p>

<p>
输入之后，输出如下：
</p>

<p>
1/   any2  emptyfile  hello2    hello2h  tags 
</p>

<p>
any  any3  hello.c    hello2.c  hello2s  test/
</p>

<p>
这里-p选项显示目录提示符号'/'。
</p>


<p>
$ls 1
</p>

<p>
输入之后，输出如下：
</p>

<p>
hello.c  hello.o  main.c  makefile  vim70.vim      vim70x.vim
</p>

<p>
hello.h  main     main.o  tags      vim70.viminfo
</p>


<p>
2）给目录1打包：
</p>

<p>
$ tar -czvf 1.tar.gz 1
</p>

<p>
输入之后，输出如下：
</p>

<p>
1/
</p>

<p>
1/main.c
</p>

<p>
1/vim70.viminfo
</p>

<p>
1/main
</p>

<p>
1/hello.h
</p>

<p>
1/tags
</p>

<p>
1/hello.c
</p>

<p>
1/main.o
</p>

<p>
1/vim70.vim
</p>

<p>
1/vim70x.vim
</p>

<p>
1/hello.o
</p>

<p>
1/makefile
</p>


<p>
$ls -p
</p>

<p>
输入之后，输出如下：
</p>

<p>
1         any   any3       hello.c  hello2.c  hello2s  test/
</p>

<p>
1.tar.gz  any2  emptyfile  hello2   hello2h   tags
</p>


<p>
3）给1.tar.gz解压：
</p>

<p>
$mv 1.tar.gz test;cd test;ls
</p>

<p>
输入之后，输出如下：
</p>

<p>
1.tar.gz
</p>


<p>
$tar -xzvf 1.tar.gz
</p>

<p>
输入之后，输出如下：
</p>

<p>
1/
</p>

<p>
1/main.c
</p>

<p>
1/vim70.viminfo
</p>

<p>
1/main
</p>

<p>
1/hello.h
</p>

<p>
1/tags
</p>

<p>
1/hello.c
</p>

<p>
1/main.o
</p>

<p>
1/vim70.vim
</p>

<p>
1/vim70x.vim
</p>

<p>
1/hello.o
</p>

<p>
1/makefile
</p>


<p>
$ls -p
</p>

<p>
输入之后，输出如下：
</p>

<p>
1/  1.tar.gz
</p>


<p>
$ls 1
</p>

<p>
输入之后，输出如下：
</p>

<p>
hello.c  hello.o  main.c  makefile  vim70.vim      vim70x.vim
</p>

<p>
hello.h  main     main.o  tags      vim70.viminfo
</p>


<p>
4）分析：
</p>

<p>
根据上述过程我可以知道，
</p>

<p>
（1）tar命令给目录1打包的格式：tar -czvf 1.tar.gz 1
</p>

<p>
这里1.tar.gz是包名，1是目录或者文件名。
</p>

<p>
（2）tar命令给1.tar.gz解包的格式：tar -xzvf 1.tar.gz
</p>

<p>
这里1.tar.gz是包名。解压出刚刚打包的目录1，不直接把文件全放出来，保留包。
</p>

<p>
（3）这里选项z代表压缩的意思，可以去掉对应压缩和解压的z。压缩时传递的文件或目录是什么就会解压出什么，比如： tar czvf this.tar.gz ./*.txt 将多个txt文件压缩，那么解压出来就是多个txt文件。传递的是目录解压出来的也是目录如前所示。
</p>

<p>
（4）想要解压到指定的路径，那么就先进入到这个路径中再解压相应的文件，而不能再命令中直接指定解压的路径。
</p>

<p>
（5）-f选项指定文件名，可以单独指定，但后面一定要跟文件名。
</p>

<p>
例如：tar -czv 1 -f 1.tar.gz
</p>


<p>
【其它】
</p>

<p>
问题：如何追加？
</p>

                    </div>
                </article>                        
                
                <!--{% include duoshuo_comment.ext %}-->
            </td>
        </tr>
        <tr>
            <td id="td_page_footer" colspan="6">
    <footer>
        &copy 2015
    </footer>
    <a id="bottom"></a>
</td>
        </tr>
    </tbody>
</table>
    </main>
  </body>
</html>