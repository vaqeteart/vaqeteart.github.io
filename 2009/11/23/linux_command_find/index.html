<!DOCTYPE html>
<html>
  <head><meta name="generator" content="Hexo 3.9.0">
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<title>
    Linux命令学习手册-find
</title>

<!--css-->
<!--link rel="stylesheet" href="/style.css" type="text/css" /-->
<link rel="stylesheet" href="../../../../css/partial/head.css">
<link rel="stylesheet" href="../../../../css/partial/header.css">
<link rel="stylesheet" href="../../../../css/partial/archives.css">
<link rel="stylesheet" href="../../../../css/partial/categories.css">
<link rel="stylesheet" href="../../../../css/partial/home-posts.css">
<link rel="stylesheet" href="../../../../css/partial/page-nav.css">
<link rel="stylesheet" href="../../../../css/partial/tags.css">
<link rel="stylesheet" href="../../../../css/partial/about.css">
<link rel="stylesheet" href="../../../../css/partial/more.css">
<link rel="stylesheet" href="../../../../css/partial/footer.css">
<link rel="stylesheet" href="../../../../css/post.css">
<link rel="stylesheet" href="../../../../css/orgmode/hexo_orgmode_style.css">


<!--javascript-->
<!--script type="text/javascript" src="/script.js"></script-->
<script src="../../../../lib/jquery-1.11.3.min.js"></script>
<script src="../../../../js/common.js"></script>
<script src="../../../../js/nav.js"></script>

  </head>
  <body>
    <main class="main">
      <table class="container">
    <tbody id="tb_container">
        <tr id="tr_navbar">
            <script src="js/nav.js"></script>
<table class="navbar">
	<tbody>
		<tr>
			<th class="navitm">
				<a href="../../../../index.html">主页</a>
			</th>

			<th class="navitm">
				<a href="../../../../categories">分类</a>
				<div id="category_menus" class="second">
					
					<!--合并内部类和自定义类。
    每个分类的数据结构包括：
    id: 分类唯一id
    title: 分类名
    parent: 父分类id
    children:子分类数组
注：
内部类包含一个固定的分类结type="text/javascript"内部根分类设置为categories, title为分类在主题config.yml中有配置（待定）。
后续文章中设置的分类如果不是内部类都会被称作自定义类，可以通过hexo本身引擎检测出来。
最终内部类和自定义类会合并到完整分类(full_categories)中，这样让所有类能用json等通用方式表示，便于移植。

使用举例：
var category_info = getCategoriesInfo();
<x var symbols={}; x> //定义导出变量
<x- include('category_list', {symbols:symbols}) x> //包含该文件
<x var category_info = symbols.getCategoriesInfo(); x> //获取分类信息：包含分类树，以及分类与文章数映射表。
<x- symbols.list_category(category_info.categories, category_info.categories_count) x> //列出分类索引树

注： '<x' 是EJS模板语言的标记比如x为%。
-->

					
					<ul id="full_categories_tree" class="categories_tree categories_level0" type="none"><li id="categories" class="categories_tree_item"><a href="../../../../categories/" class="item_path"><span id="categories_switch" class="tree_switch">▷</span><span id="categories_title" class="item_title">分类</span><span id="categories_count" class="item_count">(56)</span></a><ul id="categories_tree" class="categories_tree categories_level2" type="none"><li id="note" class="categories_tree_item"><a href="../../../../categories/categories/note" class="item_path"><span id="note_switch" class="tree_switch">▷</span><span id="note_title" class="item_title">记事</span><span id="note_count" class="item_count">(7)</span></a><ul id="note_tree" class="categories_tree categories_level3" type="none"><li id="remind" class="categories_tree_item"><a href="../../../../categories/categories/note/remind" class="item_path"><span id="remind_switch" class="tree_switch">○</span><span id="remind_title" class="item_title">备忘</span><span id="remind_count" class="item_count">(0)</span></a></li><li id="plan" class="categories_tree_item"><a href="../../../../categories/categories/note/plan" class="item_path"><span id="plan_switch" class="tree_switch">○</span><span id="plan_title" class="item_title">计划</span><span id="plan_count" class="item_count">(0)</span></a></li>|</ul></li><li id="study" class="categories_tree_item"><a href="../../../../categories/categories/study" class="item_path"><span id="study_switch" class="tree_switch">▷</span><span id="study_title" class="item_title">学习</span><span id="study_count" class="item_count">(4)</span></a><ul id="study_tree" class="categories_tree categories_level3" type="none"><li id="problem" class="categories_tree_item"><a href="../../../../categories/categories/study/problem" class="item_path"><span id="problem_switch" class="tree_switch">○</span><span id="problem_title" class="item_title">问题</span><span id="problem_count" class="item_count">(0)</span></a></li><li id="git" class="categories_tree_item"><a href="../../../../categories/categories/study/git" class="item_path"><span id="git_switch" class="tree_switch">○</span><span id="git_title" class="item_title">git</span><span id="git_count" class="item_count">(1)</span></a></li><li id="os" class="categories_tree_item"><a href="../../../../categories/categories/study/os" class="item_path"><span id="os_switch" class="tree_switch">○</span><span id="os_title" class="item_title">操作系统</span><span id="os_count" class="item_count">(1)</span></a></li><li id="books" class="categories_tree_item"><a href="../../../../categories/categories/study/books" class="item_path"><span id="books_switch" class="tree_switch">▷</span><span id="books_title" class="item_title">books</span><span id="books_count" class="item_count">(0)</span></a><ul id="books_tree" class="categories_tree categories_level4" type="none"><li id="apue" class="categories_tree_item"><a href="../../../../categories/categories/study/books/apue" class="item_path"><span id="apue_switch" class="tree_switch">○</span><span id="apue_title" class="item_title">APUE</span><span id="apue_count" class="item_count">(0)</span></a></li>|</ul></li><li id="linux" class="categories_tree_item"><a href="../../../../categories/categories/study/linux" class="item_path"><span id="linux_switch" class="tree_switch">▷</span><span id="linux_title" class="item_title">linux</span><span id="linux_count" class="item_count">(6)</span></a><ul id="linux_tree" class="categories_tree categories_level4" type="none"><li id="misc" class="categories_tree_item"><a href="../../../../categories/categories/study/linux/misc" class="item_path"><span id="misc_switch" class="tree_switch">○</span><span id="misc_title" class="item_title">杂乱</span><span id="misc_count" class="item_count">(3)</span></a></li><li id="command" class="categories_tree_item"><a href="../../../../categories/categories/study/linux/command" class="item_path"><span id="command_switch" class="tree_switch">○</span><span id="command_title" class="item_title">命令</span><span id="command_count" class="item_count">(19)</span></a></li>|</ul></li><li id="jekyll" class="categories_tree_item"><a href="../../../../categories/categories/study/jekyll" class="item_path"><span id="jekyll_switch" class="tree_switch">○</span><span id="jekyll_title" class="item_title">jekyll</span><span id="jekyll_count" class="item_count">(0)</span></a></li><li id="kits" class="categories_tree_item"><a href="../../../../categories/categories/study/kits" class="item_path"><span id="kits_switch" class="tree_switch">○</span><span id="kits_title" class="item_title">工具</span><span id="kits_count" class="item_count">(1)</span></a></li><li id="emacs" class="categories_tree_item"><a href="../../../../categories/categories/study/emacs" class="item_path"><span id="emacs_switch" class="tree_switch">○</span><span id="emacs_title" class="item_title">emacs</span><span id="emacs_count" class="item_count">(2)</span></a></li><li id="vim" class="categories_tree_item"><a href="../../../../categories/categories/study/vim" class="item_path"><span id="vim_switch" class="tree_switch">○</span><span id="vim_title" class="item_title">vim</span><span id="vim_count" class="item_count">(0)</span></a></li>|</ul></li><li id="work" class="categories_tree_item"><a href="../../../../categories/categories/work" class="item_path"><span id="work_switch" class="tree_switch">▷</span><span id="work_title" class="item_title">工作</span><span id="work_count" class="item_count">(0)</span></a><ul id="work_tree" class="categories_tree categories_level3" type="none"><li id="progress" class="categories_tree_item"><a href="../../../../categories/categories/work/progress" class="item_path"><span id="progress_switch" class="tree_switch">○</span><span id="progress_title" class="item_title">进度</span><span id="progress_count" class="item_count">(0)</span></a></li>|</ul></li><li id="life" class="categories_tree_item"><a href="../../../../categories/categories/life" class="item_path"><span id="life_switch" class="tree_switch">▷</span><span id="life_title" class="item_title">生活</span><span id="life_count" class="item_count">(0)</span></a><ul id="life_tree" class="categories_tree categories_level3" type="none"><li id="experience" class="categories_tree_item"><a href="../../../../categories/categories/life/experience" class="item_path"><span id="experience_switch" class="tree_switch">○</span><span id="experience_title" class="item_title">经验</span><span id="experience_count" class="item_count">(0)</span></a></li><li id="tips" class="categories_tree_item"><a href="../../../../categories/categories/life/tips" class="item_path"><span id="tips_switch" class="tree_switch">○</span><span id="tips_title" class="item_title">技巧</span><span id="tips_count" class="item_count">(0)</span></a></li>|</ul></li><li id="others" class="categories_tree_item"><a href="../../../../categories/categories/others" class="item_path"><span id="others_switch" class="tree_switch">▷</span><span id="others_title" class="item_title">其它</span><span id="others_count" class="item_count">(4)</span></a><ul id="others_tree" class="categories_tree categories_level3" type="none"><li id="rambles" class="categories_tree_item"><a href="../../../../categories/categories/others/rambles" class="item_path"><span id="rambles_switch" class="tree_switch">○</span><span id="rambles_title" class="item_title">随笔</span><span id="rambles_count" class="item_count">(0)</span></a></li><li id="temp" class="categories_tree_item"><a href="../../../../categories/categories/others/temp" class="item_path"><span id="temp_switch" class="tree_switch">○</span><span id="temp_title" class="item_title">临时</span><span id="temp_count" class="item_count">(0)</span></a></li><li id="test" class="categories_tree_item"><a href="../../../../categories/categories/others/test" class="item_path"><span id="test_switch" class="tree_switch">○</span><span id="test_title" class="item_title">测试</span><span id="test_count" class="item_count">(0)</span></a></li>|</ul></li>|</ul></li></ul>
				</div>
			</th>

			<th class="navblank"></th>

			<th class="navitm">
				<a href="../../../../tags">标签</a>
				<div id="tag_menus" class="second">
					<ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/gtd-next/">gtd_next</a><span class="tag-list-count">1</span></li></ul>
				</div>
			</th>

			<th class="navitm">
				<a href="../../../../archives">归档</a>
			</th>

			<th class="navblank"></th>

			<th class="navitm">
				<a href="../../../../more">更多</a>
			</th>

			<th class="navitm">
				<a href="../../../../about">关于</a>
			</th>

			<th class="navblank" style="width:25%;"></th>

			<th class="navitm" style="margin:0; padding:0;border:none;">
				<form method="get" id="searchform" action="/search.html" style="margin:0;padding:0;height:100%;">
					<span style="color:#00FF00;">Q</span>
					<span style="border-style:solid; border-width:1px; border-color:#00FF00;
		  		border-top:0px; border-left:0px;border-right:0px; 
				margin:0;padding:0;height:100%;">
						<input value="Search by title (canbe regex)..." name="s" class="s" onfocus="if (this.value == 'Search by title (canbe regex)...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search by title (canbe regex)...';}" style="margin:0;padding:0;height:100%;border:none;background: #000000; color:#00A600;" type="text">
					</span>
					<!--input type="submit" value="Q" style="width:20%;"-->
				</form>
			</th>

			<th class="navblank"></th>

			<th class="navblank"></th>

			<a href="#" id="topbtn">⇑</a>

			<a href="#bottom" id="bottombtn">⇓</a>
			<!--⇐⇑⇒⇓-->
		</tr><tr>
	</tr></tbody>
</table>
        </tr>
        <tr>
            <td id="td_page_header" colspan="6" valign="top" align="right" style="width:100%;">
        <header style="text-align: center;">
               <a href="/" title="Menu.Home">
               <h1>QuietHeart's Site</h1>
               </a>
        </header>
</td>    
        </tr>
        <tr>
            <td id="td_posts" colspan="6" valign="top">
                <h1 id="header1" style="text-align: center;">
                    Linux命令学习手册-find
                </h1>
                <hr id="title_line">
                <article>
                    <div>
                        <div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">1. 功能</a></li>
<li><a href="#orgheadline2">2. 描述</a>
<ul>
<li><a href="#orgheadline3">2.1. <code>find</code> 命令的参数</a></li>
<li><a href="#orgheadline4">2.2. <code>find</code> 命令选项</a></li>
<li><a href="#orgheadline5">2.3. 使用 <code>exec</code> 或 <code>ok</code> 来执行shell命令</a></li>
</ul>
</li>
<li><a href="#orgheadline6">3. 举例</a>
<ul>
<li><a href="#orgheadline7">3.1. 按名称</a>
<ul>
<li><a href="#orgheadline8">3.1.1. 在当前目录中查找任何扩展名为 <code>.c</code> 的文件：</a></li>
<li><a href="#orgheadline9">3.1.2. 到 <code>./test</code> 、 <code>./viStudy</code> 目录查找所有 <code>.c</code> 文件：</a></li>
<li><a href="#orgheadline10">3.1.3. 不区分大小写的 <code>find</code> 查找：</a></li>
<li><a href="#orgheadline11">3.1.4. 列出当前目录和所有子目录中的所有文件（包括隐藏文件）的完整清单：</a></li>
</ul>
</li>
<li><a href="#orgheadline12">3.2. 按类型</a>
<ul>
<li><a href="#orgheadline13">3.2.1. 查找某（当前）目录中的所有子目录：</a></li>
<li><a href="#orgheadline14">3.2.2. 查找某（当前）目录中的所有符号链接：</a></li>
<li><a href="#orgheadline15">3.2.3. 从当前目录开始查找位于本文件系统中文件名以XC结尾的文件：</a></li>
<li><a href="#orgheadline16">3.2.4. 告知 <code>find</code> 在指定文件系统(例如 <code>vfat</code> )中查找:</a></li>
</ul>
</li>
<li><a href="#orgheadline17">3.3. 按时间</a>
<ul>
<li><a href="#orgheadline18">3.3.1. 查找在最近 1 *24小时内修改的所有文件：</a></li>
<li><a href="#orgheadline19">3.3.2. 查找恰好在 1 *24小时以前修改的所有文件：</a></li>
<li><a href="#orgheadline20">3.3.3. 查找 1 *24个多小时以前修改的所有文件：</a></li>
<li><a href="#orgheadline21">3.3.4. 查找在不到 1 分钟以前读取的所有文件：</a></li>
<li><a href="#orgheadline22">3.3.5. 查找在当前目录中 <code>hello2.c</code> 文件之后被编辑过的所有文件：</a></li>
<li><a href="#orgheadline23">3.3.6. 查找更改时间比文件httpd1.conf新但比文件temp旧的文件：</a></li>
</ul>
</li>
<li><a href="#orgheadline24">3.4. 按大小</a>
<ul>
<li><a href="#orgheadline25">3.4.1. 查找所有大于 5MB 的用户文件:</a></li>
<li><a href="#orgheadline26">3.4.2. 在当前目录下查找长度超过10块的文件（一块等于512字节）：</a></li>
<li><a href="#orgheadline27">3.4.3. 搜索所有零字节文件并将它们移至 /tmp/zerobyte 文件夹:</a></li>
<li><a href="#orgheadline28">3.4.4. 查找test目录下的空文件：</a></li>
</ul>
</li>
<li><a href="#orgheadline29">3.5. 按权限、所属</a>
<ul>
<li><a href="#orgheadline30">3.5.1. 在当前目录下查找文件权限位为 <code>755</code> 的文件:</a></li>
<li><a href="#orgheadline31">3.5.2. 查找属于 <code>user1name</code> 或着属于 <code>user2name</code> 的文件:</a></li>
<li><a href="#orgheadline32">3.5.3. 查找既属于 <code>user1name</code> 又属于 <code>user2name</code> 用户的文件:</a></li>
<li><a href="#orgheadline33">3.5.4. 查找在系统中属于非用户（ <code>?</code> ）的文件:</a></li>
<li><a href="#orgheadline34">3.5.5. 查找在系统中属于 <code>username</code> 的文件：</a></li>
<li><a href="#orgheadline35">3.5.6. 查找在系统中属于 <code>groupname</code> 的文件:</a></li>
</ul>
</li>
<li><a href="#orgheadline36">3.6. 按指定目录</a>
<ul>
<li><a href="#orgheadline37">3.6.1. 希望在 <code>/apps</code> 目录下查找文件，但不希望在 <code>/apps/bin</code> 目录下查找：</a></li>
<li><a href="#orgheadline38">3.6.2. 在 <code>/usr/sam</code> 目录下查找不在 <code>dir1</code> 子目录之内的所有文件：</a></li>
<li><a href="#orgheadline39">3.6.3. 避开多个文件夹：</a></li>
<li><a href="#orgheadline40">3.6.4. 确保先在一个目录中进行查找，然后才在其子目录中进行查找:</a></li>
<li><a href="#orgheadline41">3.6.5. 让 <code>find</code> 在至少下至目录树三个级别的目录中查找：</a></li>
<li><a href="#orgheadline42">3.6.6. 在目录树的前三个级别中查找日志文件:</a></li>
</ul>
</li>
<li><a href="#orgheadline43">3.7. 查找并执行命令：</a>
<ul>
<li><a href="#orgheadline44">3.7.1. 用 =ls -l=命令列出所匹配到的文件:</a></li>
<li><a href="#orgheadline45">3.7.2. 在 <code>/logs</code> 目录中查找更改时间在5日以前的文件并删除它们：</a></li>
<li><a href="#orgheadline46">3.7.3. 当前目录中查找所有文件名以 <code>.LOG</code> 结尾、更改时间在5日以上的文件并删除,删除之前先给提示:</a></li>
<li><a href="#orgheadline47">3.7.4. 匹配所有文件名为 <code>passwd*</code> 的文件，然后执行 <code>grep</code> 命令看这些文件中是否存在 <code>sam</code> 用户:</a></li>
<li><a href="#orgheadline48">3.7.5. 当前目录中文件属主具有读、写权限，并且文件所属组的用户和其他用户具有读权限的文件:</a></li>
<li><a href="#orgheadline49">3.7.6. 查找 <code>/var/logs</code> 目录中更改时间在7日以前的普通文件，并在删除之前询问它们:</a></li>
<li><a href="#orgheadline50">3.7.7. 查找系统中所有属于 <code>root</code> 组的文件:</a></li>
<li><a href="#orgheadline51">3.7.8. 查找并删除访问时间在7日以来、含有数字后缀的 <code>admin.log</code> 文件:</a></li>
</ul>
</li>
<li><a href="#orgheadline52">3.8. 高效的查找执行：</a>
<ul>
<li><a href="#orgheadline53">3.8.1. 查找系统中的每一个普通文件，然后使用xargs命令来测试它们分别属于哪类文件:</a></li>
<li><a href="#orgheadline54">3.8.2. 当前目录下查找 <code>file</code> 开头的文件然后把结果保存到 <code>/tmp/core.log</code> 文件中：</a></li>
<li><a href="#orgheadline55">3.8.3. 在当前目录下查找所有用户具有读、写和执行权限的文件，并收回相应的写权限：</a></li>
<li><a href="#orgheadline56">3.8.4. 用 <code>grep</code> 命令在当前目录下的所有的普通文件中搜索 <code>hostname</code> 这个词：</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgheadline57">4. 其它</a></li>
</ul>
</div>
</div>

<p>
<code>find pathname -options [-print -exec -ok ...]</code>
</p>

<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1"><span class="section-number-2">1</span> 功能</h2>
<div class="outline-text-2" id="text-1">
<p>
<code>find</code> 用于查找符合某些特性的文件。由于 <code>find</code> 具有强大的功能，所以它的选项也很多，其中大部分选项都值得我们花时间来了解一下。
</p>

<p>
即使系统中含有网络文件系统( NFS)， <code>find</code> 命令在该文件系统中同样有效，只要你具有相应的权限。
</p>
</div>
</div>

<div id="outline-container-orgheadline2" class="outline-2">
<h2 id="orgheadline2"><span class="section-number-2">2</span> 描述</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3"><span class="section-number-3">2.1</span> <code>find</code> 命令的参数</h3>
<div class="outline-text-3" id="text-2-1">
<p>
<code>find</code> 的所有参数均为可选
</p>

<ul class="org-ul">
<li><code>pathname</code> : <code>find</code> 命令所查找的目录路径。例如用.来表示当前目录，用 <code>/</code> 来表示系统根目录。</li>

<li><code>-print</code> ： <code>find</code> 命令将匹配的文件输出到标准输出。</li>

<li><code>-exec</code> ： <code>find</code> 命令对匹配的文件执行该参数所给出的shell命令。相应命令的形式为 <code>command {  } \;</code> ，注意 <code>{   }</code> 和 <code>\；</code> 之间的空格。</li>

<li><code>-ok</code> ： 和 <code>-exec</code> 的作用相同，只不过以一种更为安全的模式来执行该参数所给出的shell命令，在执行每一个命令之前，都会给出提示，让用户来确定是否执行。</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4"><span class="section-number-3">2.2</span> <code>find</code> 命令选项</h3>
<div class="outline-text-3" id="text-2-2">
<ul class="org-ul">
<li><code>-name</code> 按照文件名查找文件。</li>

<li><code>-perm</code> 按照文件权限来查找文件。</li>

<li><code>-prune</code> 使用这一选项可以使 <code>find</code> 命令不在当前指定的目录中查找，如果同时使用 <code>-depth</code> 选项，那么 <code>-prune</code> 将被 <code>find</code> 命令忽略。</li>

<li><code>-user</code> 按照文件属主来查找文件。</li>

<li><code>-group</code> 按照文件所属的组来查找文件。</li>

<li><p>
<code>-mtime -n +n</code> 
</p>

<p>
按文件更改时间来查找文件， <code>-n</code> 表示文件更改时间距现在 <code>n</code> 天以内， <code>+n</code> 表示文件更改时间距现在 <code>n</code> 天以前。 <code>find</code> 命令还有 <code>-atime</code> 和 <code>-ctime</code> 选项，但它们都和 <code>-m time</code> 选项。
</p></li>

<li><code>-nogroup</code> 查找无有效所属组的文件，即该文件所属的组在 <code>/etc/groups</code> 中不存在。</li>

<li><code>-nouser</code> 查找无有效属主的文件，即该文件的属主在 <code>/etc/passwd</code> 中不存在。</li>

<li><code>-newer file1 ! file2</code> 查找更改时间比文件 <code>file1</code> 新但比文件 <code>file2</code> 旧的文件。</li>

<li><p>
<code>-type</code>
</p>

<p>
查找某一类型的文件，诸如：
</p>
<ul class="org-ul">
<li><code>b</code> 块设备文件。</li>

<li><code>d</code> 目录。</li>

<li><code>c</code> 字符设备文件。</li>

<li><code>p</code> 管道文件。</li>

<li><code>l</code> 符号链接文件。</li>

<li><code>f</code> 普通文件。</li>
</ul></li>
</ul>


<ul class="org-ul">
<li><code>-size n [cwbkMG]</code> ： 查找文件长度为 <code>n</code> 块的文件，带有 <code>c</code> 等时表示文件长度(如 <code>c</code> 表示字节计）。</li>

<li><code>-depth</code> ：在查找文件时，首先查找当前目录中的文件，然后再在其子目录中查找。</li>

<li><code>-fstype</code> ：查找位于某一类型文件系统中的文件，这些文件系统类型通常可以在配置文件 <code>/etc/fstab</code> 中找到，该配置文件中包含了本系统中有关文件系统的信息。</li>

<li><code>-mount</code> ：在查找文件时不跨越文件系统 <code>mount</code> 点。</li>

<li><code>-follow</code> ：如果 <code>find</code> 命令遇到符号链接文件，就跟踪至链接所指向的文件。</li>

<li><code>-cpio</code> ：对匹配的文件使用 <code>cpio</code> 命令，将这些文件备份到磁带设备中。</li>
</ul>


<p>
另外,下面三个的区别:
</p>
<ul class="org-ul">
<li><code>-amin n</code> 查找系统中最后N分钟访问的文件</li>

<li><code>-atime n</code> 查找系统中最后n*24小时访问的文件</li>

<li><code>-cmin n</code> 查找系统中最后N分钟被改变文件状态的文件</li>

<li><code>-ctime n</code> 查找系统中最后 <code>n*24</code> 小时被改变文件状态的文件</li>

<li><code>-mmin n</code> 查找系统中最后N分钟被改变文件数据的文件</li>

<li><code>-mtime n</code> 查找系统中最后 <code>n*24</code> 小时被改变文件数据的文件</li>
</ul>
</div>
</div>


<div id="outline-container-orgheadline5" class="outline-3">
<h3 id="orgheadline5"><span class="section-number-3">2.3</span> 使用 <code>exec</code> 或 <code>ok</code> 来执行shell命令</h3>
<div class="outline-text-3" id="text-2-3">
<p>
使用 <code>find</code> 时，只要把想要的操作写在一个文件里，就可以用 <code>exec</code> 来配合 <code>find</code> 查找，很方便的。
</p>

<p>
在有些操作系统中只允许 <code>-exec</code> 选项执行诸如 <code>ls</code> 或 <code>ls -l</code> 这样的命令。大多数用户使用这一选项是为了查找旧文件并删除它们。建议在真正执行 <code>rm</code> 命令删除文件之前，最好先用 <code>ls</code> 命令看一下，确认它们是所要删除的文件。
</p>

<p>
<code>exec</code> 选项后面跟随着所要执行的命令或脚本，然后是一对儿 <code>{ }</code> ，一个空格和一个 <code>\</code> ，最后是一个分号。为了使用 <code>exec</code> 选项，必须要同时使用 <code>print</code> 选项。如果验证一下 <code>find</code> 命令，会发现该命令只输出从当前路径起的相对路径及文件名。
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline6" class="outline-2">
<h2 id="orgheadline6"><span class="section-number-2">3</span> 举例</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7"><span class="section-number-3">3.1</span> 按名称</h3>
<div class="outline-text-3" id="text-3-1">
</div><div id="outline-container-orgheadline8" class="outline-4">
<h4 id="orgheadline8"><span class="section-number-4">3.1.1</span> 在当前目录中查找任何扩展名为 <code>.c</code> 的文件：</h4>
<div class="outline-text-4" id="text-3-1-1">
<div class="org-src-container">

<pre class="src src-sh">$find ./ -name '*.c'
</pre>
</div>

<p>
或
</p>
<div class="org-src-container">

<pre class="src src-sh">$find ./ -name \*.c
</pre>
</div>

<p>
或
</p>
<div class="org-src-container">

<pre class="src src-sh">$find -name '*.c'
</pre>
</div>

<p>
输入之后，输出如下：
</p>
<pre class="example">
./hello.c
./1/main.c
./1/hello.c
./hello2.c
</pre>

<p>
这里，当前目录只用 <code>.</code> 也行，如果不用转义， <code>*.c</code> 必须括在引号(单/双)当中，如果不指定路径，将在当前目录找; 默认把子目录下的也都找出来了。
</p>
</div>
</div>


<div id="outline-container-orgheadline9" class="outline-4">
<h4 id="orgheadline9"><span class="section-number-4">3.1.2</span> 到 <code>./test</code> 、 <code>./viStudy</code> 目录查找所有 <code>.c</code> 文件：</h4>
<div class="outline-text-4" id="text-3-1-2">
<div class="org-src-container">

<pre class="src src-sh">$find test viStudy/ -name '*.c'
</pre>
</div>

<p>
输入之后，输出如下：
</p>
<pre class="example">
test/test_out_direct.c
viStudy/hello.c
viStudy/1/main.c
viStudy/1/hello.c
viStudy/hello2.c
</pre>

<p>
这里，如果您没有相应的权限，您在开始浏览许多目录时将生成错误消息例如如下的提示：
</p>

<pre class="example">
find:  /tmp/orbit-root: Permission denied
</pre>

<p>
可以不让错误输出，防止混乱：
</p>
<div class="org-src-container">

<pre class="src src-sh">$find /usr /home  /tmp -name "*.jar" 2&gt;/dev/null
</pre>
</div>
</div>
</div>



<div id="outline-container-orgheadline10" class="outline-4">
<h4 id="orgheadline10"><span class="section-number-4">3.1.3</span> 不区分大小写的 <code>find</code> 查找：</h4>
<div class="outline-text-4" id="text-3-1-3">
<div class="org-src-container">

<pre class="src src-sh">$find downloads -iname '*.gif'
</pre>
</div>

<p>
输入之后，输出如下：
</p>
<pre class="example">
downloads/.xvpics/Calendar05_enlarged.gif
downloads/lcmgcfexsmall.GIF
</pre>

<p>
这里,默认情况下， <code>find</code> 是区分大小写的。对于不区分大小写的 <code>find</code> ，将 <code>-iname</code> 测试替换为 <code>-name</code> 。
</p>
</div>
</div>


<div id="outline-container-orgheadline11" class="outline-4">
<h4 id="orgheadline11"><span class="section-number-4">3.1.4</span> 列出当前目录和所有子目录中的所有文件（包括隐藏文件）的完整清单：</h4>
<div class="outline-text-4" id="text-3-1-4">
<div class="org-src-container">

<pre class="src src-sh">$find
</pre>
</div>

<p>
或
</p>
<div class="org-src-container">

<pre class="src src-sh">$find .
</pre>
</div>

<p>
或
</p>
<div class="org-src-container">

<pre class="src src-sh">$find . -print
</pre>
</div>

<p>
输入之后，输出如下：
</p>
<pre class="example">
.
./any
./tags
./hello.c
./1
./1/main.c
...省略...
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline12" class="outline-3">
<h3 id="orgheadline12"><span class="section-number-3">3.2</span> 按类型</h3>
<div class="outline-text-3" id="text-3-2">
</div><div id="outline-container-orgheadline13" class="outline-4">
<h4 id="orgheadline13"><span class="section-number-4">3.2.1</span> 查找某（当前）目录中的所有子目录：</h4>
<div class="outline-text-4" id="text-3-2-1">
<div class="org-src-container">

<pre class="src src-sh">$find . -type d
</pre>
</div>

<p>
或
</p>
<div class="org-src-container">

<pre class="src src-sh">$find -type d
</pre>
</div>

<p>
输入之后，输出如下：
</p>
<pre class="example">
.
./1
</pre>
</div>
</div>

<div id="outline-container-orgheadline14" class="outline-4">
<h4 id="orgheadline14"><span class="section-number-4">3.2.2</span> 查找某（当前）目录中的所有符号链接：</h4>
<div class="outline-text-4" id="text-3-2-2">
<div class="org-src-container">

<pre class="src src-sh">$find . -type l
</pre>
</div>

<p>
输入之后输出如下：
</p>

<pre class="example">
./hello2s
</pre>

<p>
这里， <code>./hello2s</code> 是一个软链接，这个命令显示的也是软链接。其他 <code>find</code> 可以找到的文件类型包括：
</p>
<ul class="org-ul">
<li><code>b</code> — 块（缓存）特殊</li>
<li><code>c</code> — 字符（未缓存）特殊</li>
<li><code>p</code> — 命名管道 (FIFO)</li>
<li><code>s</code> — 套接字</li>
</ul>

<p>
用 <code>ls</code> 列出软链接需要用 <code>-ls</code> ，用管道不行。如下：
</p>

<div class="org-src-container">

<pre class="src src-sh">$find . type l -ls
</pre>
</div>

<p>
输出：
</p>
<pre class="example">
56231215    0 lrwxrwxrwx   1 quietheart member          6 May 16 16:14 ./hello2s -&gt; hello2
</pre>
</div>
</div>

<div id="outline-container-orgheadline15" class="outline-4">
<h4 id="orgheadline15"><span class="section-number-4">3.2.3</span> 从当前目录开始查找位于本文件系统中文件名以XC结尾的文件：</h4>
<div class="outline-text-4" id="text-3-2-3">
<div class="org-src-container">

<pre class="src src-sh">$ find . -name "*.XC" -mount -print
</pre>
</div>

<p>
这里，在当前的文件系统中查找文件（不进入其他文件系统），使用了 <code>find</code> 命令的 <code>mount</code> 选项。
</p>
</div>
</div>


<div id="outline-container-orgheadline16" class="outline-4">
<h4 id="orgheadline16"><span class="section-number-4">3.2.4</span> 告知 <code>find</code> 在指定文件系统(例如 <code>vfat</code> )中查找:</h4>
<div class="outline-text-4" id="text-3-2-4">
<div class="org-src-container">

<pre class="src src-sh">$find / -name  "*.txt" -fstype vfat
</pre>
</div>

<p>
还有
</p>
<div class="org-src-container">

<pre class="src src-sh">$find / -name  "*.txt" -mount 2
</pre>
</div>

<p>
等等，不常用就不多说了。
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline17" class="outline-3">
<h3 id="orgheadline17"><span class="section-number-3">3.3</span> 按时间</h3>
<div class="outline-text-3" id="text-3-3">
</div><div id="outline-container-orgheadline18" class="outline-4">
<h4 id="orgheadline18"><span class="section-number-4">3.3.1</span> 查找在最近 1 *24小时内修改的所有文件：</h4>
<div class="outline-text-4" id="text-3-3-1">
<div class="org-src-container">

<pre class="src src-sh">$find . -mtime -1
</pre>
</div>

<p>
输入之后输出如下：
</p>
<pre class="example">
./plsql/FORALLSample
./plsql/RegExpDNASample
/plsql/RegExpSample
</pre>
</div>
</div>


<div id="outline-container-orgheadline19" class="outline-4">
<h4 id="orgheadline19"><span class="section-number-4">3.3.2</span> 查找恰好在 1 *24小时以前修改的所有文件：</h4>
<div class="outline-text-4" id="text-3-3-2">
<div class="org-src-container">

<pre class="src src-sh">$find . -mtime 1
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline20" class="outline-4">
<h4 id="orgheadline20"><a id="ID-9220d5f1-b625-4453-a2df-a6790cce3a39"></a><span class="section-number-4">3.3.3</span> 查找 1 *24个多小时以前修改的所有文件：</h4>
<div class="outline-text-4" id="text-3-3-3">
<div class="org-src-container">

<pre class="src src-sh">$find . -mtime +1
</pre>
</div>

<p>
这里， <code>find</code> 根据系统的时间戳搜索文件的选项。这些时间戳包括：
</p>

<ul class="org-ul">
<li><code>mtime</code> — 文件内容上次修改时间</li>

<li><code>atime</code> — 文件被读取或访问的时间</li>

<li><code>ctime</code> — 文件状态变化时间</li>
</ul>

<p>
这里， <code>ctime</code> 则需要更多的解释。由于 <code>inode</code> 维护着每个文件上的元数据，因此，如果与文件有关的元数据发生变化，则 inode 数据也将变化。这可能是由一系列操作引起的，包括创建到文件的符号链接、更改文件权限或移动了文件等。由于在这些情况下，文件内容不会被读取或修改，因此 <code>mtime</code> 和 <code>atime</code> 不会改变，但 <code>ctime</code> 将发生变化。
</p>

<p>
这些时间选项都需要与一个值 <code>n</code> 结合使用，指定为 <code>-n</code> 、 <code>n</code> 或 <code>+n</code>:
</p>

<ul class="org-ul">
<li><code>-n</code> 返回项小于 <code>n</code></li>
<li><code>+n</code> 返回项大于 <code>n</code></li>
<li><code>n</code> 返回项正好与 <code>n</code> 相等</li>
</ul>
</div>
</div>


<div id="outline-container-orgheadline21" class="outline-4">
<h4 id="orgheadline21"><span class="section-number-4">3.3.4</span> 查找在不到 1 分钟以前读取的所有文件：</h4>
<div class="outline-text-4" id="text-3-3-4">
<div class="org-src-container">

<pre class="src src-sh">$find . -amin -1
</pre>
</div>

<p>
输入之后，输出如下：
</p>
<pre class="example">
./.bashrc
/.bash_history
./.xauthj5FCx1
</pre>

<p>
这里是刚刚登陆系统就运行了这个命令，所以输出这样。默认情况下， <code>-mtime</code> 、 <code>-atime</code> 和 <code>-ctime</code> 指的是最近 24 小时。但是，如果它们前面加上了开始时间选项，则 24 小时的周期将从当日的开始时间算起。您还可以使用 <code>mmin</code> 、 <code>amin</code> 和 <code>cmin</code> 查找在不到 1 小时的时间内变化了的时间戳。 
</p>

<p>
另外，应该注意的是，使用 <code>find</code> 命令查找文件本身将更改该文件的访问时间作为其元数据的一部分。
</p>
</div>
</div>


<div id="outline-container-orgheadline22" class="outline-4">
<h4 id="orgheadline22"><span class="section-number-4">3.3.5</span> 查找在当前目录中 <code>hello2.c</code> 文件之后被编辑过的所有文件：</h4>
<div class="outline-text-4" id="text-3-3-5">
<div class="org-src-container">

<pre class="src src-sh">$find . -newer hello2.c
</pre>
</div>

<p>
输入之后输出如下：
</p>
<pre class="example">
.
./hello2s
./hello2h
./hello2
</pre>

<p>
这里,需要注意硬链接的特殊性（我不说，只有你明白了才知道我说的意思）。使用 <code>-newer</code> 、 <code>-anewer</code> 和 <code>-cnewer</code> 选项与特定的文件比较查找已修改或访问过的文件。这类似于 <code>-mtime</code> 、 <code>-atime</code> 和 <code>-ctime</code> 。 
</p>

<ul class="org-ul">
<li><code>-newer</code> 指内容最近被修改的文件</li>
<li><code>-anewer</code> 指最近被读取过的文件</li>
<li><code>-cnewer</code> 指状态最近发生变化的文件</li>
</ul>
</div>
</div>


<div id="outline-container-orgheadline23" class="outline-4">
<h4 id="orgheadline23"><span class="section-number-4">3.3.6</span> 查找更改时间比文件httpd1.conf新但比文件temp旧的文件：</h4>
<div class="outline-text-4" id="text-3-3-6">
<div class="org-src-container">

<pre class="src src-sh">$find -newer httpd1.conf  ! -newer temp -ls
</pre>
</div>
<p>
其中， <code>！</code> 是逻辑非符号。
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline24" class="outline-3">
<h3 id="orgheadline24"><span class="section-number-3">3.4</span> 按大小</h3>
<div class="outline-text-3" id="text-3-4">
</div><div id="outline-container-orgheadline25" class="outline-4">
<h4 id="orgheadline25"><span class="section-number-4">3.4.1</span> 查找所有大于 5MB 的用户文件:</h4>
<div class="outline-text-4" id="text-3-4-1">
<div class="org-src-container">

<pre class="src src-sh">$find / -size  +5000000c 2&gt; /dev/null
</pre>
</div>

<p>
输入之后，输出如下：
</p>
<pre class="example">
/var/log/lastlog
/var/log/cups/access_log.4
/var/spool/mail/bluher
</pre>

<p>
这里，把错误的信息定位到 <code>/dev/null</code> 了。
</p>

<p>
结尾的 <code>c</code> 以字节为单位报告我们的结果。默认情况下， <code>find</code> 以 512 字节块的数量报告大小。如果我们将 <code>c</code> 替换为 <code>k</code> ，我们还会看到以千字节的数量报告的结果，如果使用 <code>w</code> ，则会看到以两字节字的数量报告的结果。
</p>
</div>
</div>


<div id="outline-container-orgheadline26" class="outline-4">
<h4 id="orgheadline26"><span class="section-number-4">3.4.2</span> 在当前目录下查找长度超过10块的文件（一块等于512字节）：</h4>
<div class="outline-text-4" id="text-3-4-2">
<div class="org-src-container">

<pre class="src src-sh">$ find . -size +10 -print
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline27" class="outline-4">
<h4 id="orgheadline27"><span class="section-number-4">3.4.3</span> 搜索所有零字节文件并将它们移至 /tmp/zerobyte 文件夹:</h4>
<div class="outline-text-4" id="text-3-4-3">
<div class="org-src-container">

<pre class="src src-sh">$find test -type f  -size 0 -exec mv {} /tmp/zerobyte \;
</pre>
</div>

<p>
这里， <code>-exec</code> 操作允许 <code>find</code> 在它遇到的文件上执行任何 <code>shell</code> 命令。在本文的后面部分，您将看到其用法的更多示例。大括号允许移动每个空文件。
</p>
</div>
</div>


<div id="outline-container-orgheadline28" class="outline-4">
<h4 id="orgheadline28"><span class="section-number-4">3.4.4</span> 查找test目录下的空文件：</h4>
<div class="outline-text-4" id="text-3-4-4">
<div class="org-src-container">

<pre class="src src-sh">$find test -empty
</pre>
</div>

<p>
输入之后输出如下：
</p>
<pre class="example">
test/foo
test/test
</pre>
<p>
查找空文件用的是 <code>-empty</code> 选项。
</p>
</div>
</div>
</div>


<div id="outline-container-orgheadline29" class="outline-3">
<h3 id="orgheadline29"><span class="section-number-3">3.5</span> 按权限、所属</h3>
<div class="outline-text-3" id="text-3-5">
</div><div id="outline-container-orgheadline30" class="outline-4">
<h4 id="orgheadline30"><span class="section-number-4">3.5.1</span> 在当前目录下查找文件权限位为 <code>755</code> 的文件:</h4>
<div class="outline-text-4" id="text-3-5-1">
<div class="org-src-container">

<pre class="src src-sh">$find . -perm 755 -print
</pre>
</div>

<p>
还有一种表达方法：在八进制数字前面要加一个横杠 <code>-</code> ，表示都匹配，如 <code>-007</code> 就相当于 <code>777</code> ， <code>-006</code> 相当于 <code>666</code> .
</p>
</div>
</div>

<div id="outline-container-orgheadline31" class="outline-4">
<h4 id="orgheadline31"><span class="section-number-4">3.5.2</span> 查找属于 <code>user1name</code> 或着属于 <code>user2name</code> 的文件:</h4>
<div class="outline-text-4" id="text-3-5-2">
<div class="org-src-container">

<pre class="src src-sh">$find / -user user1name -or -user user2name
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline32" class="outline-4">
<h4 id="orgheadline32"><span class="section-number-4">3.5.3</span> 查找既属于 <code>user1name</code> 又属于 <code>user2name</code> 用户的文件:</h4>
<div class="outline-text-4" id="text-3-5-3">
<div class="org-src-container">

<pre class="src src-sh">$find / -user user1name -and -user2name
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline33" class="outline-4">
<h4 id="orgheadline33"><span class="section-number-4">3.5.4</span> 查找在系统中属于非用户（ <code>?</code> ）的文件:</h4>
<div class="outline-text-4" id="text-3-5-4">
<div class="org-src-container">

<pre class="src src-sh">$find /－nouser
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline34" class="outline-4">
<h4 id="orgheadline34"><span class="section-number-4">3.5.5</span> 查找在系统中属于 <code>username</code> 的文件：</h4>
<div class="outline-text-4" id="text-3-5-5">
<div class="org-src-container">

<pre class="src src-sh">$find / -user username
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline35" class="outline-4">
<h4 id="orgheadline35"><span class="section-number-4">3.5.6</span> 查找在系统中属于 <code>groupname</code> 的文件:</h4>
<div class="outline-text-4" id="text-3-5-6">
<div class="org-src-container">

<pre class="src src-sh">$find / -group groupname
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline36" class="outline-3">
<h3 id="orgheadline36"><span class="section-number-3">3.6</span> 按指定目录</h3>
<div class="outline-text-3" id="text-3-6">
</div><div id="outline-container-orgheadline37" class="outline-4">
<h4 id="orgheadline37"><span class="section-number-4">3.6.1</span> 希望在 <code>/apps</code> 目录下查找文件，但不希望在 <code>/apps/bin</code> 目录下查找：</h4>
<div class="outline-text-4" id="text-3-6-1">
<div class="org-src-container">

<pre class="src src-sh">$find /apps -path "/apps/bin" -prune -o -print
</pre>
</div>
<p>
在使用 <code>-prune</code> 选项时要当心，因为如果你同时使用了 <code>-depth</code> 选项，那么 <code>-prune</code> 选项就会被 <code>find</code> 命令忽略。
</p>
</div>
</div>

<div id="outline-container-orgheadline38" class="outline-4">
<h4 id="orgheadline38"><span class="section-number-4">3.6.2</span> 在 <code>/usr/sam</code> 目录下查找不在 <code>dir1</code> 子目录之内的所有文件：</h4>
<div class="outline-text-4" id="text-3-6-2">
<div class="org-src-container">

<pre class="src src-sh">$find /usr/sam -path "/usr/sam/dir1" -prune -o -print
</pre>
</div>
<p>
这里， <code>find [-path ..] [expression]</code> 在路径列表的后面的是表达式。
</p>

<p>
<code>-path "/usr/sam" -prune -o -print</code> 是 <code>-path "/usr/sam" -a -prune -o -print</code> 的简写表达式按顺序求值， <code>-a</code> 和 <code>-o</code> 都是短路求值，与 shell 的 <code>&amp;&amp;</code> 和 <code>||</code> 类似。
</p>

<p>
如果 <code>-path "/usr/sam"= 为真，则求值 =-prune</code> , <code>-prune</code> 返回真，与逻辑表达式为真；否则不求值 <code>-prune</code> ，与逻辑表达式为假。
</p>

<p>
如果 <code>-path "/usr/sam" -a -prune</code> 为假，则求值 <code>-print</code> ， <code>-print</code> 返回真，或逻辑表达式为真；否则不求值 <code>-print</code> ，或逻辑表达式为真。
</p>

<p>
这个表达式组合特例可以用伪码写为
</p>
<pre class="example">
if -path "/usr/sam"  then
          -prune
else
          -print
</pre>
</div>
</div>


<div id="outline-container-orgheadline39" class="outline-4">
<h4 id="orgheadline39"><span class="section-number-4">3.6.3</span> 避开多个文件夹：</h4>
<div class="outline-text-4" id="text-3-6-3">
<div class="org-src-container">

<pre class="src src-sh">$find /usr/sam \( -path /usr/sam/dir1 -o -path /usr/sam/file1 \) -prune -o -print
</pre>
</div>
<p>
这里，圆括号表示表达式的结合。 <code>\</code> 表示引用，即指示 shell 不对后面的字符作特殊解释，而留给 <code>find</code> 命令去解释其意义。
</p>
</div>
</div>


<div id="outline-container-orgheadline40" class="outline-4">
<h4 id="orgheadline40"><span class="section-number-4">3.6.4</span> 确保先在一个目录中进行查找，然后才在其子目录中进行查找:</h4>
<div class="outline-text-4" id="text-3-6-4">
<div class="org-src-container">

<pre class="src src-sh">$find -name "*test*" -depth
</pre>
</div>

<p>
输入之后，输出：
</p>
<pre class="example">
./test/test
./test
./localbin/test
./localbin/test_shell_var
./localbin/test.txt
./test2/test/test
./test2/test
./test2
</pre>
</div>
</div>

<div id="outline-container-orgheadline41" class="outline-4">
<h4 id="orgheadline41"><span class="section-number-4">3.6.5</span> 让 <code>find</code> 在至少下至目录树三个级别的目录中查找：</h4>
<div class="outline-text-4" id="text-3-6-5">
<div class="org-src-container">

<pre class="src src-sh">$find / -mindepth 3  -name "*log"
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline42" class="outline-4">
<h4 id="orgheadline42"><span class="section-number-4">3.6.6</span> 在目录树的前三个级别中查找日志文件:</h4>
<div class="outline-text-4" id="text-3-6-6">
<div class="org-src-container">

<pre class="src src-sh">$find / -maxdepth 3  -name "*log"
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline43" class="outline-3">
<h3 id="orgheadline43"><span class="section-number-3">3.7</span> 查找并执行命令：</h3>
<div class="outline-text-3" id="text-3-7">
</div><div id="outline-container-orgheadline44" class="outline-4">
<h4 id="orgheadline44"><span class="section-number-4">3.7.1</span> 用 =ls -l=命令列出所匹配到的文件:</h4>
<div class="outline-text-4" id="text-3-7-1">
<div class="org-src-container">

<pre class="src src-sh">$find . -type f -exec ls -l {  } \;
</pre>
</div>
<p>
输入之后，输出：
</p>
<pre class="example">
-rw-r--r--    1 root     root        34928 2003-02-25  ./conf/httpd.conf
-rw-r--r--    1 root     root        12959 2003-02-25  ./conf/magic
-rw-r--r--    1 root     root          180 2003-02-25  ./conf.d/README
</pre>
<p>
这里， <code>exec</code> 选项后面跟随着所要执行的命令或脚本，然后是一对儿 <code>{}</code> ，一个空格和一个 <code>\</code> ，最后是一个分号，注意 <code>{}</code> 内可以没有空格，但是 <code>{}</code> 后面、 <code>\</code> 前面要有一个空格。
</p>
</div>
</div>

<div id="outline-container-orgheadline45" class="outline-4">
<h4 id="orgheadline45"><span class="section-number-4">3.7.2</span> 在 <code>/logs</code> 目录中查找更改时间在5日以前的文件并删除它们：</h4>
<div class="outline-text-4" id="text-3-7-2">
<div class="org-src-container">

<pre class="src src-sh">$find logs -type f -mtime +5 -exec rm {  } \;
</pre>
</div>
<p>
在shell中用任何方式删除文件之前，应当先查看相应的文件，一定要小心！当使用诸如 <code>mv</code> 或 <code>rm</code> 命令时，可以使用 <code>-exec</code> 选项的安全模式。
</p>
</div>
</div>

<div id="outline-container-orgheadline46" class="outline-4">
<h4 id="orgheadline46"><span class="section-number-4">3.7.3</span> 当前目录中查找所有文件名以 <code>.LOG</code> 结尾、更改时间在5日以上的文件并删除,删除之前先给提示:</h4>
<div class="outline-text-4" id="text-3-7-3">
<div class="org-src-container">

<pre class="src src-sh">$find . -name "*.conf"  -mtime +5 -ok rm {  } \;
</pre>
</div>
<p>
输入之后，输出如下提示：
</p>
<pre class="example">
&lt; rm ... ./conf/httpd.conf &gt; ? n
</pre>
<p>
这里，按 <code>y</code> 键删除文件，按 <code>n</code> 键不删除。
</p>
</div>
</div>

<div id="outline-container-orgheadline47" class="outline-4">
<h4 id="orgheadline47"><span class="section-number-4">3.7.4</span> 匹配所有文件名为 <code>passwd*</code> 的文件，然后执行 <code>grep</code> 命令看这些文件中是否存在 <code>sam</code> 用户:</h4>
<div class="outline-text-4" id="text-3-7-4">
<div class="org-src-container">

<pre class="src src-sh">$find /etc -name "passwd*" -exec grep "sam" {  } \;
</pre>
</div>
<p>
输入之后，输出：
</p>
<pre class="example">
sam:x:501:501::/usr/sam:/bin/bash
</pre>
</div>
</div>

<div id="outline-container-orgheadline48" class="outline-4">
<h4 id="orgheadline48"><span class="section-number-4">3.7.5</span> 当前目录中文件属主具有读、写权限，并且文件所属组的用户和其他用户具有读权限的文件:</h4>
<div class="outline-text-4" id="text-3-7-5">
<div class="org-src-container">

<pre class="src src-sh">$find . -type f -perm 644 -exec ls -l {  } \;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline49" class="outline-4">
<h4 id="orgheadline49"><span class="section-number-4">3.7.6</span> 查找 <code>/var/logs</code> 目录中更改时间在7日以前的普通文件，并在删除之前询问它们:</h4>
<div class="outline-text-4" id="text-3-7-6">
<div class="org-src-container">

<pre class="src src-sh">$find /var/logs -type f -mtime +7 -ok rm {  } \;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline50" class="outline-4">
<h4 id="orgheadline50"><span class="section-number-4">3.7.7</span> 查找系统中所有属于 <code>root</code> 组的文件:</h4>
<div class="outline-text-4" id="text-3-7-7">
<div class="org-src-container">

<pre class="src src-sh">$find . -group root -exec ls -l {  } \;
</pre>
</div>
<p>
输入之后，输出：
</p>
<pre class="example">
-rw-r--r--    1 root     root          595 10月 31 01:09 ./fie1
</pre>
<p>
这里实际不用 <code>-exec</code> 也行，即: <code>$find . -group root</code> 。不过为了更详细列出相关的信息，使用 <code>exec</code> 选项对每个文件执行了 <code>ls</code> 。
</p>
</div>
</div>

<div id="outline-container-orgheadline51" class="outline-4">
<h4 id="orgheadline51"><span class="section-number-4">3.7.8</span> 查找并删除访问时间在7日以来、含有数字后缀的 <code>admin.log</code> 文件:</h4>
<div class="outline-text-4" id="text-3-7-8">
<div class="org-src-container">

<pre class="src src-sh">$find . -name "admin.log[0-9][0-9][0-9]" -atime -7  -ok rm {  } \;
</pre>
</div>
<p>
输入之后，输出：
</p>
<pre class="example">
&lt; rm ... ./admin.log001 &gt; ? n
&lt; rm ... ./admin.log002 &gt; ? n
&lt; rm ... ./admin.log042 &gt; ? n
&lt; rm ... ./admin.log942 &gt; ? n
</pre>
<p>
这里，只寻找了3位数的数字。
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline52" class="outline-3">
<h3 id="orgheadline52"><span class="section-number-3">3.8</span> 高效的查找执行：</h3>
<div class="outline-text-3" id="text-3-8">
<p>
使用 <code>find</code> 命令的 <code>-exec</code> 选项处理匹配到的文件时，  <code>find</code> 命令将所有匹配到的文件一起传递给 <code>exec</code> 执行。但有些系统对能够传递给 <code>exec</code> 的命令长度有限制，这样在 <code>find</code> 命令运行几分钟之后，就会出现溢出错误;还可能导致有些系统进程过多，系统性能下降的问题，因而效率不高.
</p>

<p>
使用 <code>xargs</code> 命令则只有一个进程。另外，在使用 <code>xargs</code> 命令时，究竟是一次获取所有的参数，还是分批取得参数，以及每一次获取参数的数目都会根据该命令的选项及系统内核中相应的可调参数来确定。 
</p>

<p>
下面是 <code>xargs</code> 命令同 <code>find</code> 命令一起使用的一些例子:
</p>
</div>

<div id="outline-container-orgheadline53" class="outline-4">
<h4 id="orgheadline53"><span class="section-number-4">3.8.1</span> 查找系统中的每一个普通文件，然后使用xargs命令来测试它们分别属于哪类文件:</h4>
<div class="outline-text-4" id="text-3-8-1">
<div class="org-src-container">

<pre class="src src-sh">$find . -type f -print | xargs file
</pre>
</div>
<p>
输入之后，输出：
</p>
<pre class="example">
./.kde/Autostart/Autorun.desktop: UTF-8 Unicode English text
./.kde/Autostart/.directory:      ISO-8859 text\
...省略...
</pre>
</div>
</div>

<div id="outline-container-orgheadline54" class="outline-4">
<h4 id="orgheadline54"><span class="section-number-4">3.8.2</span> 当前目录下查找 <code>file</code> 开头的文件然后把结果保存到 <code>/tmp/core.log</code> 文件中：</h4>
<div class="outline-text-4" id="text-3-8-2">
<div class="org-src-container">

<pre class="src src-sh">$find . -name "file*" -print | xargs echo "" &gt; /temp/core.log
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline55" class="outline-4">
<h4 id="orgheadline55"><span class="section-number-4">3.8.3</span> 在当前目录下查找所有用户具有读、写和执行权限的文件，并收回相应的写权限：</h4>
<div class="outline-text-4" id="text-3-8-3">
<div class="org-src-container">

<pre class="src src-sh">$find . -perm -7 -print | xargs chmod o-w
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline56" class="outline-4">
<h4 id="orgheadline56"><span class="section-number-4">3.8.4</span> 用 <code>grep</code> 命令在当前目录下的所有的普通文件中搜索 <code>hostname</code> 这个词：</h4>
<div class="outline-text-4" id="text-3-8-4">
<div class="org-src-container">

<pre class="src src-sh">$find . -type f -print | xargs grep "hostname"
</pre>
</div>
<p>
或
</p>
<div class="org-src-container">

<pre class="src src-sh">$find . -name \* -type f -print | xargs grep "hostname"
</pre>
</div>
<p>
输入之后，输出：
</p>
<pre class="example">
./httpd1.conf:#     different IP addresses or hostnames and have them handled by the
./httpd1.conf:# VirtualHost: If you want to maintain multiple domains/hostnames on your
</pre>
<p>
注意，这里， <code>\</code> 用来取消 <code>find</code> 命令中的 <code>*</code> 在shell中的特殊含义。
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline57" class="outline-2">
<h2 id="orgheadline57"><span class="section-number-2">4</span> 其它</h2>
</div>

                    </div>
                </article>                        
                
                <!--{% include duoshuo_comment.ext %}-->
            </td>
        </tr>
        <tr>
            <td id="td_page_footer" colspan="6">
    <footer>
        &copy 2015
    </footer>
    <a id="bottom"></a>
</td>
        </tr>
    </tbody>
</table>
    </main>
  </body>
</html>