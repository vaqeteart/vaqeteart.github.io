<!DOCTYPE html>
<html>
  <head><meta name="generator" content="Hexo 3.9.0">
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<title>
    Linux命令学习手册-dd
</title>

<!--css-->
<!--link rel="stylesheet" href="/style.css" type="text/css" /-->
<link rel="stylesheet" href="../../../../css/partial/head.css">
<link rel="stylesheet" href="../../../../css/partial/header.css">
<link rel="stylesheet" href="../../../../css/partial/archives.css">
<link rel="stylesheet" href="../../../../css/partial/categories.css">
<link rel="stylesheet" href="../../../../css/partial/home-posts.css">
<link rel="stylesheet" href="../../../../css/partial/page-nav.css">
<link rel="stylesheet" href="../../../../css/partial/tags.css">
<link rel="stylesheet" href="../../../../css/partial/about.css">
<link rel="stylesheet" href="../../../../css/partial/more.css">
<link rel="stylesheet" href="../../../../css/partial/footer.css">
<link rel="stylesheet" href="../../../../css/post.css">
<link rel="stylesheet" href="../../../../css/orgmode/hexo_orgmode_style.css">


<!--javascript-->
<!--script type="text/javascript" src="/script.js"></script-->
<script src="../../../../lib/jquery-1.11.3.min.js"></script>
<script src="../../../../js/common.js"></script>
<script src="../../../../js/nav.js"></script>

  </head>
  <body>
    <main class="main">
      <table class="container">
    <tbody id="tb_container">
        <tr id="tr_navbar">
            <script src="js/nav.js"></script>
<table class="navbar">
	<tbody>
		<tr>
			<th class="navitm">
				<a href="../../../../index.html">主页</a>
			</th>

			<th class="navitm">
				<a href="../../../../categories">分类</a>
				<div id="category_menus" class="second">
					
					<!--合并内部类和自定义类。
    每个分类的数据结构包括：
    id: 分类唯一id
    title: 分类名
    parent: 父分类id
    children:子分类数组
注：
内部类包含一个固定的分类结type="text/javascript"内部根分类设置为categories, title为分类在主题config.yml中有配置（待定）。
后续文章中设置的分类如果不是内部类都会被称作自定义类，可以通过hexo本身引擎检测出来。
最终内部类和自定义类会合并到完整分类(full_categories)中，这样让所有类能用json等通用方式表示，便于移植。

使用举例：
var category_info = getCategoriesInfo();
<x var symbols={}; x> //定义导出变量
<x- include('category_list', {symbols:symbols}) x> //包含该文件
<x var category_info = symbols.getCategoriesInfo(); x> //获取分类信息：包含分类树，以及分类与文章数映射表。
<x- symbols.list_category(category_info.categories, category_info.categories_count) x> //列出分类索引树

注： '<x' 是EJS模板语言的标记比如x为%。
-->

					
					<ul id="full_categories_tree" class="categories_tree categories_level0" type="none"><li id="categories" class="categories_tree_item"><a href="../../../../categories/" class="item_path"><span id="categories_switch" class="tree_switch">▷</span><span id="categories_title" class="item_title">分类</span><span id="categories_count" class="item_count">(55)</span></a><ul id="categories_tree" class="categories_tree categories_level2" type="none"><li id="note" class="categories_tree_item"><a href="../../../../categories/categories/note" class="item_path"><span id="note_switch" class="tree_switch">▷</span><span id="note_title" class="item_title">记事</span><span id="note_count" class="item_count">(6)</span></a><ul id="note_tree" class="categories_tree categories_level3" type="none"><li id="remind" class="categories_tree_item"><a href="../../../../categories/categories/note/remind" class="item_path"><span id="remind_switch" class="tree_switch">○</span><span id="remind_title" class="item_title">备忘</span><span id="remind_count" class="item_count">(0)</span></a></li><li id="plan" class="categories_tree_item"><a href="../../../../categories/categories/note/plan" class="item_path"><span id="plan_switch" class="tree_switch">○</span><span id="plan_title" class="item_title">计划</span><span id="plan_count" class="item_count">(0)</span></a></li>|</ul></li><li id="study" class="categories_tree_item"><a href="../../../../categories/categories/study" class="item_path"><span id="study_switch" class="tree_switch">▷</span><span id="study_title" class="item_title">学习</span><span id="study_count" class="item_count">(4)</span></a><ul id="study_tree" class="categories_tree categories_level3" type="none"><li id="problem" class="categories_tree_item"><a href="../../../../categories/categories/study/problem" class="item_path"><span id="problem_switch" class="tree_switch">○</span><span id="problem_title" class="item_title">问题</span><span id="problem_count" class="item_count">(0)</span></a></li><li id="git" class="categories_tree_item"><a href="../../../../categories/categories/study/git" class="item_path"><span id="git_switch" class="tree_switch">○</span><span id="git_title" class="item_title">git</span><span id="git_count" class="item_count">(1)</span></a></li><li id="os" class="categories_tree_item"><a href="../../../../categories/categories/study/os" class="item_path"><span id="os_switch" class="tree_switch">○</span><span id="os_title" class="item_title">操作系统</span><span id="os_count" class="item_count">(1)</span></a></li><li id="books" class="categories_tree_item"><a href="../../../../categories/categories/study/books" class="item_path"><span id="books_switch" class="tree_switch">▷</span><span id="books_title" class="item_title">books</span><span id="books_count" class="item_count">(0)</span></a><ul id="books_tree" class="categories_tree categories_level4" type="none"><li id="apue" class="categories_tree_item"><a href="../../../../categories/categories/study/books/apue" class="item_path"><span id="apue_switch" class="tree_switch">○</span><span id="apue_title" class="item_title">APUE</span><span id="apue_count" class="item_count">(0)</span></a></li>|</ul></li><li id="linux" class="categories_tree_item"><a href="../../../../categories/categories/study/linux" class="item_path"><span id="linux_switch" class="tree_switch">▷</span><span id="linux_title" class="item_title">linux</span><span id="linux_count" class="item_count">(6)</span></a><ul id="linux_tree" class="categories_tree categories_level4" type="none"><li id="misc" class="categories_tree_item"><a href="../../../../categories/categories/study/linux/misc" class="item_path"><span id="misc_switch" class="tree_switch">○</span><span id="misc_title" class="item_title">杂乱</span><span id="misc_count" class="item_count">(3)</span></a></li><li id="command" class="categories_tree_item"><a href="../../../../categories/categories/study/linux/command" class="item_path"><span id="command_switch" class="tree_switch">○</span><span id="command_title" class="item_title">命令</span><span id="command_count" class="item_count">(19)</span></a></li>|</ul></li><li id="jekyll" class="categories_tree_item"><a href="../../../../categories/categories/study/jekyll" class="item_path"><span id="jekyll_switch" class="tree_switch">○</span><span id="jekyll_title" class="item_title">jekyll</span><span id="jekyll_count" class="item_count">(0)</span></a></li><li id="kits" class="categories_tree_item"><a href="../../../../categories/categories/study/kits" class="item_path"><span id="kits_switch" class="tree_switch">○</span><span id="kits_title" class="item_title">工具</span><span id="kits_count" class="item_count">(1)</span></a></li><li id="emacs" class="categories_tree_item"><a href="../../../../categories/categories/study/emacs" class="item_path"><span id="emacs_switch" class="tree_switch">○</span><span id="emacs_title" class="item_title">emacs</span><span id="emacs_count" class="item_count">(2)</span></a></li><li id="vim" class="categories_tree_item"><a href="../../../../categories/categories/study/vim" class="item_path"><span id="vim_switch" class="tree_switch">○</span><span id="vim_title" class="item_title">vim</span><span id="vim_count" class="item_count">(0)</span></a></li>|</ul></li><li id="work" class="categories_tree_item"><a href="../../../../categories/categories/work" class="item_path"><span id="work_switch" class="tree_switch">▷</span><span id="work_title" class="item_title">工作</span><span id="work_count" class="item_count">(0)</span></a><ul id="work_tree" class="categories_tree categories_level3" type="none"><li id="progress" class="categories_tree_item"><a href="../../../../categories/categories/work/progress" class="item_path"><span id="progress_switch" class="tree_switch">○</span><span id="progress_title" class="item_title">进度</span><span id="progress_count" class="item_count">(0)</span></a></li>|</ul></li><li id="life" class="categories_tree_item"><a href="../../../../categories/categories/life" class="item_path"><span id="life_switch" class="tree_switch">▷</span><span id="life_title" class="item_title">生活</span><span id="life_count" class="item_count">(0)</span></a><ul id="life_tree" class="categories_tree categories_level3" type="none"><li id="experience" class="categories_tree_item"><a href="../../../../categories/categories/life/experience" class="item_path"><span id="experience_switch" class="tree_switch">○</span><span id="experience_title" class="item_title">经验</span><span id="experience_count" class="item_count">(0)</span></a></li><li id="tips" class="categories_tree_item"><a href="../../../../categories/categories/life/tips" class="item_path"><span id="tips_switch" class="tree_switch">○</span><span id="tips_title" class="item_title">技巧</span><span id="tips_count" class="item_count">(0)</span></a></li>|</ul></li><li id="others" class="categories_tree_item"><a href="../../../../categories/categories/others" class="item_path"><span id="others_switch" class="tree_switch">▷</span><span id="others_title" class="item_title">其它</span><span id="others_count" class="item_count">(4)</span></a><ul id="others_tree" class="categories_tree categories_level3" type="none"><li id="rambles" class="categories_tree_item"><a href="../../../../categories/categories/others/rambles" class="item_path"><span id="rambles_switch" class="tree_switch">○</span><span id="rambles_title" class="item_title">随笔</span><span id="rambles_count" class="item_count">(0)</span></a></li><li id="temp" class="categories_tree_item"><a href="../../../../categories/categories/others/temp" class="item_path"><span id="temp_switch" class="tree_switch">○</span><span id="temp_title" class="item_title">临时</span><span id="temp_count" class="item_count">(0)</span></a></li><li id="test" class="categories_tree_item"><a href="../../../../categories/categories/others/test" class="item_path"><span id="test_switch" class="tree_switch">○</span><span id="test_title" class="item_title">测试</span><span id="test_count" class="item_count">(0)</span></a></li>|</ul></li>|</ul></li></ul>
				</div>
			</th>

			<th class="navblank"></th>

			<th class="navitm">
				<a href="../../../../tags">标签</a>
				<div id="tag_menus" class="second">
					<ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/gtd-next/">gtd_next</a><span class="tag-list-count">1</span></li></ul>
				</div>
			</th>

			<th class="navitm">
				<a href="../../../../archives">归档</a>
			</th>

			<th class="navblank"></th>

			<th class="navitm">
				<a href="../../../../more">更多</a>
			</th>

			<th class="navitm">
				<a href="../../../../about">关于</a>
			</th>

			<th class="navblank" style="width:25%;"></th>

			<th class="navitm" style="margin:0; padding:0;border:none;">
				<form method="get" id="searchform" action="/search.html" style="margin:0;padding:0;height:100%;">
					<span style="color:#00FF00;">Q</span>
					<span style="border-style:solid; border-width:1px; border-color:#00FF00;
		  		border-top:0px; border-left:0px;border-right:0px; 
				margin:0;padding:0;height:100%;">
						<input value="Search by title (canbe regex)..." name="s" class="s" onfocus="if (this.value == 'Search by title (canbe regex)...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search by title (canbe regex)...';}" style="margin:0;padding:0;height:100%;border:none;background: #000000; color:#00A600;" type="text">
					</span>
					<!--input type="submit" value="Q" style="width:20%;"-->
				</form>
			</th>

			<th class="navblank"></th>

			<th class="navblank"></th>

			<a href="#" id="topbtn">⇑</a>

			<a href="#bottom" id="bottombtn">⇓</a>
			<!--⇐⇑⇒⇓-->
		</tr><tr>
	</tr></tbody>
</table>
        </tr>
        <tr>
            <td id="td_page_header" colspan="6" valign="top" align="right" style="width:100%;">
        <header style="text-align: center;">
               <a href="/" title="Menu.Home">
               <h1>QuietHeart's Site</h1>
               </a>
        </header>
</td>    
        </tr>
        <tr>
            <td id="td_posts" colspan="6" valign="top">
                <h1 id="header1" style="text-align: center;">
                    Linux命令学习手册-dd
                </h1>
                <hr id="title_line">
                <article>
                    <div>
                        <p>
主要参考资料：
</p>

<p>
<a href="http://blog.csdn.net/liumang_D/archive/2009/02/17/3899462.aspx" target="_blank" rel="noopener">http://blog.csdn.net/liumang_D/archive/2009/02/17/3899462.aspx</a>
</p>

<p>
<a href="http://fanqiang.chinaunix.net/system/solaris/2001-05-01/255.shtml" target="_blank" rel="noopener">http://fanqiang.chinaunix.net/system/solaris/2001-05-01/255.shtml</a>
</p>

<p>
<a href="http://linux-vbird.bluedata.org/linux_base/0230filesystem.htm#dd" target="_blank" rel="noopener">http://linux-vbird.bluedata.org/linux_base/0230filesystem.htm#dd</a>
</p>


<p>
dd [OPERAND]&#x2026;
</p>

<p>
dd OPTION
</p>


<p>
【功能】
</p>

<p>
dd用指定大小的块拷贝一个文件，并在拷贝的同时进行指定的转换。
</p>


<p>
【举例】
</p>

<p>
*将本地的/dev/hdb整盘备份到/dev/hdd：
</p>

<p>
$dd if=/dev/hdb of=/dev/hdd
</p>


<p>
*将/dev/hdb全盘数据备份到指定路径的image文件:
</p>

<p>
$dd if=/dev/hdb of=/root/image
</p>

<p>
我尝试过了，如果存在image文件则替代了。
</p>


<p>
*将备份文件恢复到指定盘:
</p>

<p>
$dd if=/root/image of=/dev/hdb
</p>


<p>
*备份/dev/hdb全盘数据，并利用gzip工具进行压缩，保存到指定路径:
</p>

<p>
$dd if=/dev/hdb | gzip &gt; /root/image.gz
</p>


<p>
*将压缩的备份文件恢复到指定盘:
</p>

<p>
$gzip -dc /root/image.gz | dd of=/dev/hdb
</p>


<p>
*备份磁盘开始的512个字节大小的MBR信息到指定文件
</p>

<p>
$dd if=/dev/hda of=/root/image count=1 bs=512
</p>

<p>
这里，count=1指仅拷贝一个块；bs=512指块大小为512个字节。
</p>

<p>
如果恢复则：
</p>

<p>
$dd if=/root/image of=/dev/hda
</p>


<p>
*备份软盘:
</p>

<p>
$dd if=/dev/fd0 of=disk.img count=1 bs=1440k (即块大小为1.44M)
</p>


<p>
*拷贝内存内容到硬盘:
</p>

<p>
$dd if=/dev/mem of=/root/mem.bin bs=1024 (指定块大小为1k)  
</p>


<p>
*拷贝光盘内容到指定文件夹，并保存为cd.iso文件:
</p>

<p>
$dd if=/dev/cdrom(hdc) of=/root/cd.iso
</p>


<p>
*销毁磁盘数据:
</p>

<p>
$dd if=/dev/urandom of=/dev/hda1
</p>

<p>
注意：利用随机的数据填充硬盘，在某些必要的场合可以用来销毁数据。
</p>


<p>
*修复硬盘：
</p>

<p>
$dd if=/dev/sda of=/dev/sda
</p>

<p>
或$dd if=/dev/hda of=/dev/hda
</p>

<p>
当硬盘较长时间(一年以上)放置不使用后，磁盘上会产生magnetic flux point，当磁头读到这些区域时会遇到困难，并可能导致I/O错误。当这种情况影响到硬盘的第一个扇区时，可能导致硬盘报废。上边的命令有可能使这些数据起死回生。并且这个过程是安全、高效的(为什么？)。
</p>


<p>
【描述】
</p>

<p>
注意：指定数字的地方若以下列字符结尾则乘以相应的数字：b=512；c=1；k=1024；w=2。
</p>

<p>
参数：
</p>

<ol class="org-ol">
<li>if=文件名：输入文件名，缺省为标准输入。即指定源文件。&lt; if=input file &gt;</li>

<li>of=文件名：输出文件名，缺省为标准输出。即指定目的文件。&lt; of=output file &gt;</li>

<li><p>
ibs=bytes：一次读入bytes个字节，即指定一个块大小为bytes个字节。
</p>

<p>
obs=bytes：一次输出bytes个字节，即指定一个块大小为bytes个字节。
</p>

<p>
bs=bytes：同时设置读入/输出的块大小为bytes个字节。
</p></li>

<li>cbs=bytes：一次转换bytes个字节，即指定转换缓冲区大小。</li>

<li>skip=blocks：从输入文件开头跳过blocks个块后再开始复制。</li>

<li>seek=blocks：从输出文件开头跳过blocks个块后再开始复制。</li>
</ol>

<p>
注意：通常只用当输出文件是磁盘或磁带时才有效，即备份到磁盘或磁带时才有效。
</p>

<ol class="org-ol">
<li>count=blocks：仅拷贝blocks个块，块大小等于ibs指定的字节数。</li>

<li><p>
conv=conversion：用指定的参数转换文件。
</p>

<p>
ascii：转换ebcdic为ascii
</p>

<p>
ebcdic：转换ascii为ebcdic
</p>

<p>
ibm：转换ascii为alternate ebcdic
</p>

<p>
block：把每一行转换为长度为cbs，不足部分用空格填充
</p>

<p>
unblock：使每一行的长度都为cbs，不足部分用空格填充
</p>

<p>
lcase：把大写字符转换为小写字符
</p>

<p>
ucase：把小写字符转换为大写字符
</p>

<p>
swab：交换输入的每对字节
</p>

<p>
noerror：出错时不停止
</p>

<p>
notrunc：不截短输出文件
</p>

<p>
sync：将每个输入块填充到ibs个字节，不足部分用空（NUL）字符补齐。
</p></li>
</ol>



<p>
【其它】
</p>

<p>
*增加swap分区文件大小:
</p>

<p>
(1)创建一个大小为256M的文件：
</p>

<p>
$dd if=/dev/zero of=/swapfile bs=1024 count=262144
</p>

<p>
(2)把这个文件变成swap文件：
</p>

<p>
$mkswap /swapfile
</p>

<p>
请注意，这个指令在下达的时候请『特别小心』，因为下错字元控制，将可能使您的 filesystem 挂掉！
</p>

<p>
(3)启用这个swap文件：
</p>

<p>
$swapon /swapfile
</p>

<p>
这时候用$free 命令，可以发现swap内存比原来就增加了。
</p>

<p>
(4)关闭这个swap文件：
</p>

<p>
$swapoff /tmp/swap
</p>

<p>
这样就把这个虚拟内存关掉了。
</p>

<p>
(5)编辑/etc/fstab文件，使在每次开机时自动加载swap文件：
</p>

<p>
/swapfile    swap    swap    default   0 0
</p>


<p>
*测试硬盘的读写速度:
</p>

<p>
$dd if=/dev/zero bs=1024 count=1000000 of=/root/1Gb.file
</p>

<p>
$dd if=/root/1Gb.file bs=64k | dd of=/dev/null
</p>

<p>
通过以上两个命令输出的命令执行时间，可以计算出硬盘的读、写速度。
</p>


<p>
*确定硬盘的最佳块大小：
</p>

<p>
$dd if=/dev/zero bs=1024 count=1000000 of=/root/1Gb.file
</p>

<p>
$dd if=/dev/zero bs=2048 count=500000 of=/root/1Gb.file
</p>

<p>
$dd if=/dev/zero bs=4096 count=250000 of=/root/1Gb.file
</p>

<p>
$dd if=/dev/zero bs=8192 count=125000 of=/root/1Gb.file
</p>

<p>
通过比较以上命令输出中所显示的命令执行时间，即可确定系统最佳的块大小。
</p>


<p>
*复制硬盘：
</p>

<p>
(1)确保原盘和目的盘几何特性相同。
</p>

<p>
(2)成为超级用户。
</p>

<p>
(3)在用主盘的系统中输入touch /reconfigure,有主盘的系统需要/reconfigure文件，以便在重新启动时发现复制盘。
</p>

<p>
(4)输入init 0关闭系统。
</p>

<p>
(5)将复制盘连接到系统并开机。
</p>

<p>
(6)在OK提示符下输入boot。
</p>

<p>
(7)输入dd if=/dev/dsk/device-name of=/dev/dsk/device-name bs=blocksize (输入文件if是主盘设备，输入文件of是复制盘设备) 
</p>

<p>
(8)输入fsck /dev/rdsk/device-name (检测新的文件系统) 
</p>

<p>
(9)输入mount /dev/rdsk/device-name /mnt 加载复制盘的root文件系统。 
</p>

<p>
(10)编辑复制盘上的/etc/vfstab文件，指向正确的设备名。 
</p>

<p>
(11)输入umount/mnt ，卸载复制盘的root文件系统。 
</p>

<p>
(12)输入init 0关闭系统。 
</p>

<p>
(13)输入boot diskN -s以单用户模式引导复制盘。 
</p>

<p>
(14)输入sys-uconfig恢复配置复制盘，在该盘配置恢复后系统关闭。 
</p>

<p>
(15)输入boot diskN 引导复制盘 
</p>

<p>
(16)提供相关的系统信息。(HOSTNAME TIMEZONE  IP&#x2026;) 
</p>

<p>
(17)系统完成，即作为超级用户登录验证系统信息。 
</p>

<p>
例如： 
</p>

<p>
#dd if=/dev/dsk/c0t0d0s2 of=/dev/dsk/c0t1d0s2 bs=100k 
</p>

<p>
#fsck /dev/rdsk/c0t1d0s2 
</p>

<p>
#mount /dev/rdsk/c0t1d0s2 /mnt 
</p>

<p>
#cd /mnt/etc 
</p>

<p>
#vi /etc/vfstab 
</p>

<p>
#cd /;umount /mnt 
</p>

<p>
#init 0 
</p>

<p>
OK boot disk2 -s 
</p>

<p>
#sys-unconfig 
</p>

<p>
OK boot disk2 -s 
</p>


<p>
*/dev/null和/dev/zero的区别：
</p>

<p>
/dev/null，外号叫无底洞，你可以向它输出任何数据，它通吃，并且不会撑着！
</p>

<p>
它是空设备，也称为位桶（bit bucket）。任何写入它的输出都会被抛弃。如果不想让消息以标准输出显示或写入文件，那么可以将消息重定向到位桶。
</p>

<p>
/dev/zero,是一个输入设备，你可你用它来初始化文件。该设备无穷尽地提供0，可以使用任何你需要的数目——设备提供的要多的多。他可以用于向设备或文件写入字符串0。
</p>

                    </div>
                </article>                        
                
                <!--{% include duoshuo_comment.ext %}-->
            </td>
        </tr>
        <tr>
            <td id="td_page_footer" colspan="6">
    <footer>
        &copy 2015
    </footer>
    <a id="bottom"></a>
</td>
        </tr>
    </tbody>
</table>
    </main>
  </body>
</html>